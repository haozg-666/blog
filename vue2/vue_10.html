<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.0">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/blog/images/logo.png"><title>【10】Nuxt3 文档说明 | Mr.Haozg's Notes</title><meta name="description" content="【10】Nuxt3 文档说明">
    <link rel="preload" href="/blog/assets/style-R9aYlmuh.css" as="style"><link rel="stylesheet" href="/blog/assets/style-R9aYlmuh.css">
    <link rel="modulepreload" href="/blog/assets/app-pp3-cujv.js"><link rel="modulepreload" href="/blog/assets/vue_10.html-BF6c4Jhs.js"><link rel="modulepreload" href="/blog/assets/vue_10.html-DqpCebwt.js">
    <link rel="prefetch" href="/blog/assets/index.html-8GgJAuHf.js" as="script"><link rel="prefetch" href="/blog/assets/timeline.html-Bh7QVcnE.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-Bx4W90r_.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-DZ2PNBog.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-BEM2c7G0.js" as="script"><link rel="prefetch" href="/blog/assets/debounceAndThrottle.html-BzCc0nIp.js" as="script"><link rel="prefetch" href="/blog/assets/interceptorsAxios.html-CNXk2QB1.js" as="script"><link rel="prefetch" href="/blog/assets/teacher_01.html-d-j66s1I.js" as="script"><link rel="prefetch" href="/blog/assets/teacher_02.html-BK9RashO.js" as="script"><link rel="prefetch" href="/blog/assets/teacher_03.html-8Wa4A0gE.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-9IHxHu4S.js" as="script"><link rel="prefetch" href="/blog/assets/vue_01.html-DS78CemA.js" as="script"><link rel="prefetch" href="/blog/assets/vue_02.html-BQ8zpWcr.js" as="script"><link rel="prefetch" href="/blog/assets/vue_03.html-DkC624Ci.js" as="script"><link rel="prefetch" href="/blog/assets/vue_04.html-DwSAVeJu.js" as="script"><link rel="prefetch" href="/blog/assets/vue_05.html-D4mRiuYV.js" as="script"><link rel="prefetch" href="/blog/assets/vue_06.html-DxuMab-A.js" as="script"><link rel="prefetch" href="/blog/assets/vue_07.html-40_Y4FFa.js" as="script"><link rel="prefetch" href="/blog/assets/vue_08.html-DdaxN8dg.js" as="script"><link rel="prefetch" href="/blog/assets/vue_09.html-CZRzt7J7.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-D34TRr0H.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-BlnSFHY-.js" as="script"><link rel="prefetch" href="/blog/assets/timeline.html-DHA3YXYI.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-DhO7Rtfc.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-CKhl2T0w.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-CipIq1Y1.js" as="script"><link rel="prefetch" href="/blog/assets/debounceAndThrottle.html-BX5wshem.js" as="script"><link rel="prefetch" href="/blog/assets/interceptorsAxios.html-Uw5xkXde.js" as="script"><link rel="prefetch" href="/blog/assets/teacher_01.html-C6KhtFQK.js" as="script"><link rel="prefetch" href="/blog/assets/teacher_02.html-Bnw19Ue-.js" as="script"><link rel="prefetch" href="/blog/assets/teacher_03.html-C86htLZa.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-DvwqCiJW.js" as="script"><link rel="prefetch" href="/blog/assets/vue_01.html-B7UujH8E.js" as="script"><link rel="prefetch" href="/blog/assets/vue_02.html-CnHnJSvG.js" as="script"><link rel="prefetch" href="/blog/assets/vue_03.html-CNNPOlzK.js" as="script"><link rel="prefetch" href="/blog/assets/vue_04.html-gIeoUs6Z.js" as="script"><link rel="prefetch" href="/blog/assets/vue_05.html-DCeuEMdD.js" as="script"><link rel="prefetch" href="/blog/assets/vue_06.html-n49NqOvw.js" as="script"><link rel="prefetch" href="/blog/assets/vue_07.html-b4soB8ZR.js" as="script"><link rel="prefetch" href="/blog/assets/vue_08.html-BhG3vyan.js" as="script"><link rel="prefetch" href="/blog/assets/vue_09.html-Ch7-BuBQ.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-C6jDYMzx.js" as="script"><link rel="prefetch" href="/blog/assets/giscus-7BMGhbDA.js" as="script"><link rel="prefetch" href="/blog/assets/AutoCatalog-CmO5HIAS.js" as="script"><link rel="prefetch" href="/blog/assets/Timeline-Cnl413Nh.js" as="script"><link rel="prefetch" href="/blog/assets/TypingText-4AAvrryp.js" as="script"><link rel="prefetch" href="/blog/assets/pageTocSubMenu-DgR0DNiY.js" as="script"><link rel="prefetch" href="/blog/assets/photoswipe.esm-SzV8tJDW.js" as="script"><link rel="prefetch" href="/blog/assets/noopModule-BwyMyQ7y.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog/" class=""><img class="logo" src="/blog/images/logo.png" alt="Mr.Haozg&#39;s Notes"><span class="site-name can-hide">Mr.Haozg&#39;s Notes</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="基础三大件"><span class="title">基础三大件</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="基础三大件"><span class="title">基础三大件</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/html/" class="" aria-label="html"><!--[--><!--]--> html <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/css/" class="" aria-label="css"><!--[--><!--]--> css <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/js/" class="" aria-label="js"><!--[--><!--]--> js <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/vue2/" class="router-link-active" aria-label="vue2"><!--[--><!--]--> vue2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/vue3/" class="" aria-label="vue3"><!--[--><!--]--> vue3 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="其他"><span class="title">其他</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="其他"><span class="title">其他</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/haozg-666" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://leetcode.cn/u/haozg6" rel="noopener noreferrer" target="_blank" aria-label="力扣"><!--[--><!--]--> 力扣 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://juejin.cn/user/1204720474797272" rel="noopener noreferrer" target="_blank" aria-label="掘金"><!--[--><!--]--> 掘金 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/blog/teacher/teacher_01.md" class="" aria-label="教资"><!--[--><!--]--> 教资 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/timeline" class="" aria-label="时间轴"><!--[--><!--]--> 时间轴 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索 ctrl+k" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="基础三大件"><span class="title">基础三大件</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="基础三大件"><span class="title">基础三大件</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/html/" class="" aria-label="html"><!--[--><!--]--> html <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/css/" class="" aria-label="css"><!--[--><!--]--> css <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/js/" class="" aria-label="js"><!--[--><!--]--> js <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/vue2/" class="router-link-active" aria-label="vue2"><!--[--><!--]--> vue2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/vue3/" class="" aria-label="vue3"><!--[--><!--]--> vue3 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="其他"><span class="title">其他</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="其他"><span class="title">其他</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/haozg-666" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://leetcode.cn/u/haozg6" rel="noopener noreferrer" target="_blank" aria-label="力扣"><!--[--><!--]--> 力扣 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://juejin.cn/user/1204720474797272" rel="noopener noreferrer" target="_blank" aria-label="掘金"><!--[--><!--]--> 掘金 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/blog/teacher/teacher_01.md" class="" aria-label="教资"><!--[--><!--]--> 教资 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/timeline" class="" aria-label="时间轴"><!--[--><!--]--> 时间轴 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/blog/vue2/" class="router-link-active sidebar-item sidebar-heading" aria-label="vue2"><!--[--><!--]--> vue2 <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">【KKB】vue2学习 <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/blog/vue2/vue_01" class="sidebar-item" aria-label="【01】手写简单版vue"><!--[--><!--]--> 【01】手写简单版vue <!--[--><!--]--></a><!----></li><li><a href="/blog/vue2/vue_02" class="sidebar-item" aria-label="【02】初始化和响应式"><!--[--><!--]--> 【02】初始化和响应式 <!--[--><!--]--></a><!----></li><li><a href="/blog/vue2/vue_03" class="sidebar-item" aria-label="【03】异步更新、VNode、Diff"><!--[--><!--]--> 【03】异步更新、VNode、Diff <!--[--><!--]--></a><!----></li><li><a href="/blog/vue2/vue_04" class="sidebar-item" aria-label="【04】组件化原理和手写vue2"><!--[--><!--]--> 【04】组件化原理和手写vue2 <!--[--><!--]--></a><!----></li><li><a href="/blog/vue2/vue_05" class="sidebar-item" aria-label="【05】相关面试问题"><!--[--><!--]--> 【05】相关面试问题 <!--[--><!--]--></a><!----></li><li><a href="/blog/vue2/vue_06" class="sidebar-item" aria-label="【06】组件化实践"><!--[--><!--]--> 【06】组件化实践 <!--[--><!--]--></a><!----></li><li><a href="/blog/vue2/vue_07" class="sidebar-item" aria-label="【07】项目最佳实践"><!--[--><!--]--> 【07】项目最佳实践 <!--[--><!--]--></a><!----></li><li><a href="/blog/vue2/vue_08" class="sidebar-item" aria-label="【08】vue2+ts"><!--[--><!--]--> 【08】vue2+ts <!--[--><!--]--></a><!----></li><li><a href="/blog/vue2/vue_09" class="sidebar-item" aria-label="【09】ssr-express"><!--[--><!--]--> 【09】ssr-express <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/vue2/vue_10" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="【10】Nuxt3 文档说明"><!--[--><!--]--> 【10】Nuxt3 文档说明 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--[--><nav class="g-toc-wrap"><ul class="g-toc"><!--[--><!--[--><li class="g-toc-level g-toc-level-1"><a class="g-toc-link" style="padding-left:8px;" href="#文档">文档</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-2"><a class="g-toc-link" style="padding-left:16px;" href="#介绍">介绍</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#自动化和约定">自动化和约定</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#服务器端渲染">服务器端渲染</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#服务器引擎">服务器引擎</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#生产就绪">生产就绪</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#模块化">模块化</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#架构">架构</a></li><!--]--><!--]--></ul></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-2"><a class="g-toc-link" style="padding-left:16px;" href="#安装">安装</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#新项目">新项目</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#开发服务器">开发服务器</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#下一步">下一步</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-2"><a class="g-toc-link" style="padding-left:16px;" href="#配置">配置</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#nuxt配置">Nuxt配置</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#环境覆盖">环境覆盖</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#环境变量和私有令牌">环境变量和私有令牌</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#应用程序配置">应用程序配置</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#runtimeconfig与appconfig">runtimeConfig与appConfig</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#外部配置文件">外部配置文件</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#vue配置">Vue配置</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#使用vite">使用Vite</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#使用webpack">使用webpack</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#启用实验性vue功能">启用实验性Vue功能</a></li><!--]--><!--]--></ul></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-2"><a class="g-toc-link" style="padding-left:16px;" href="#视图">视图</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#app-vue">app.vue</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#组件">组件</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#页面">页面</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#布局">布局</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#高级-扩展html模板">高级：扩展HTML模板</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-2"><a class="g-toc-link" style="padding-left:16px;" href="#资源">资源</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#公共目录">公共目录</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#示例">示例</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#资源目录">资源目录</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#示例-1">示例</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#全局样式导入">全局样式导入</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#示例-2">示例</a></li><!--]--><!--]--></ul></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-2"><a class="g-toc-link" style="padding-left:16px;" href="#样式化">样式化</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#本地样式表">本地样式表</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#在组件中引入">在组件中引入</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#css属性">CSS属性</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#使用字体">使用字体</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#通过npm分发样式表">通过NPM分发样式表</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#外部样式表">外部样式表</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#动态添加样式表">动态添加样式表</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#使用nitro插件修改渲染的head">使用Nitro插件修改渲染的head</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#使用预处理器">使用预处理器</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#单文件组件-sfc-样式化">单文件组件（SFC）样式化</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#类和样式绑定">类和样式绑定</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#使用v-bind动态样式">使用v-bind动态样式</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#作用域样式">作用域样式</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#css模块">CSS模块</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#预处理器支持">预处理器支持</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#使用postcss">使用PostCSS</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#利用布局实现多样式">利用布局实现多样式</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#第三方库和模块">第三方库和模块</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#轻松加载web字体">轻松加载Web字体</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#进阶">进阶</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#过渡效果">过渡效果</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#字体高级优化">字体高级优化</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#lcp高级优化">LCP高级优化</a></li><!--]--><!--]--></ul></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-2"><a class="g-toc-link" style="padding-left:16px;" href="#路由">路由</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#页面-1">页面</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#导航">导航</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#路由参数">路由参数</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#路由中间件">路由中间件</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#路由验证">路由验证</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-2"><a class="g-toc-link" style="padding-left:16px;" href="#seo和meta">SEO和Meta</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#默认值">默认值</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#usehead">useHead</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#useseometa">useSeoMeta</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#组件-1">组件</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#类型">类型</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#功能">功能</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#响应式">响应式</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#标题模板">标题模板</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#body标签">Body标签</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#示例-3">示例</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#使用definepagemeta">使用definePageMeta</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#动态标题">动态标题</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#外部css">外部CSS</a></li><!--]--><!--]--></ul></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-2"><a class="g-toc-link" style="padding-left:16px;" href="#过渡效果-1">过渡效果</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#页面过渡">页面过渡</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#布局过渡">布局过渡</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#全局设置">全局设置</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#禁用过渡效果">禁用过渡效果</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#javascript钩子">JavaScript钩子</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#动画过渡效果">动画过渡效果</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#使用nuxtpage的过渡效果">使用NuxtPage的过渡效果</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#视图过渡api-实验性">视图过渡API(实验性)</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#已知问题">已知问题</a></li><!--]--><!--]--></ul></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-2"><a class="g-toc-link" style="padding-left:16px;" href="#数据获取">数据获取</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#为什么需要特定的组合函数">为什么需要特定的组合函数？</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#网络请求重复">网络请求重复</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#suspense">Suspense</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#usefetch">UseFetch</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#fetch">$fetch</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#useasyncdata">useAsyncData</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#选项">选项</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#懒加载">懒加载</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#仅在客户端获取数据">仅在客户端获取数据</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#减小有效负载大小">减小有效负载大小</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#缓存和重新获取数据">缓存和重新获取数据</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-5"><a class="g-toc-link" style="padding-left:40px;" href="#键">键</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-5"><a class="g-toc-link" style="padding-left:40px;" href="#刷新和执行">刷新和执行</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-5"><a class="g-toc-link" style="padding-left:40px;" href="#监听">监听</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-5"><a class="g-toc-link" style="padding-left:40px;" href="#计算url">计算URL</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#不立即执行">不立即执行</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#传递请求头和cookie">传递请求头和Cookie</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#将客户端请求头传递到api">将客户端请求头传递到API</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#从服务器端api调用中传递cookie到ssr响应">从服务器端API调用中传递Cookie到SSR响应</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#选项api支持">选项API支持</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#序列化">序列化</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#示例-4">示例</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#自定义序列化函数">自定义序列化函数</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#使用替换序列化器">使用替换序列化器</a></li><!--]--><!--]--></ul></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-2"><a class="g-toc-link" style="padding-left:16px;" href="#状态管理">状态管理</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#最佳实践">最佳实践</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#示例-5">示例</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#基本用法">基本用法</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#高级用法">高级用法</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#共享状态">共享状态</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#使用第三方库">使用第三方库</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-2"><a class="g-toc-link" style="padding-left:16px;" href="#错误处理">错误处理</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#vue渲染声明周期">Vue渲染声明周期</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#nitor服务器生命周期">Nitor服务器生命周期</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#启动错误">启动错误</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#js-chunk错误">JS chunk错误</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#错误页面">错误页面</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#错误工具">错误工具</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#useerror">useError</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#createerror">createError</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#showerror">showError</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#clearerror">clearError</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#在组件中渲染错误">在组件中渲染错误</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-2"><a class="g-toc-link" style="padding-left:16px;" href="#服务器">服务器</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#有nitro驱动">有Nitro驱动</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#对应用程序的服务器端部分拥有完全控制权">对应用程序的服务器端部分拥有完全控制权</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#通用部署">通用部署</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#混合渲染">混合渲染</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-2"><a class="g-toc-link" style="padding-left:16px;" href="#图层">图层</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#使用场景">使用场景</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#使用方法">使用方法</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-2"><a class="g-toc-link" style="padding-left:16px;" href="#部署">部署</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#node-js服务器">Node.js服务器</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#入口点">入口点</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#pm2">PM2</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#集群模式">集群模式</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#静态托管">静态托管</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#基于爬虫的预渲染">基于爬虫的预渲染</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#选择性预渲染">选择性预渲染</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#仅客户端渲染">仅客户端渲染</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#预设">预设</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#cdn代理">CDN代理</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-2"><a class="g-toc-link" style="padding-left:16px;" href="#测试">测试</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#安装-1">安装</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#设置">设置</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#nuxt配置-1">Nuxt配置</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#时间设置">时间设置</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#功能-1">功能</a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="g-toc-level g-toc-level-3"><a class="g-toc-link" style="padding-left:24px;" href="#api">API</a><ul class="g-toc-menu"><!--[--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#fetch-url">$fetch(url)</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#fetch-url-1">fetch(url)</a></li><!--]--><!--[--><li class="g-toc-level g-toc-level-4"><a class="g-toc-link" style="padding-left:32px;" href="#url-path">url(path)</a></li><!--]--><!--]--></ul></li><!--]--><!--]--></ul></li><!--]--><!--]--></ul></li><!--]--><!--]--></ul></nav><ul class="page-info"><li class="page-info-item"><label>阅读时间：</label><span>大约 60 分钟</span></li></ul><!--]--><!--]--><div><h1 id="文档" tabindex="-1"><a class="header-anchor" href="#文档" aria-hidden="true">#</a> 文档</h1><h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍" aria-hidden="true">#</a> 介绍</h2><p>Nuxt是一个免费且开源的创建，它提供了一种直观且可扩展的方式来创建类型安全、高性能和生产级别的全栈Web应用和网站，使用的是Vue.js。</p><p>我们做了一切，让你从一开始就可以编写<code>.vue</code>文件，同时在开发中享受到热模块替换的便利，并在生产中获得高性能的应用，其中默认启用了服务器端渲染。</p><p>Nuxt没有供应商锁定，允许你将应用部署到任何地方、甚至是边缘。</p><h3 id="自动化和约定" tabindex="-1"><a class="header-anchor" href="#自动化和约定" aria-hidden="true">#</a> 自动化和约定</h3><p>Nuxt使用约定和一套规范的目录结构来自动化重复的任务，让开发者可以专注于推动功能的开发。配置文件仍然可以自定义和覆盖其默认行为。</p><ul><li><strong>基于文件的路由</strong>：根据pages/目录的结构定义结构。这样可以更容易地组织应用程序，避免手动配置路由的需要。</li><li><strong>代码分割</strong>：Nuxt自动将代码拆分成较小的块，这有助于减少应用程序的初始加载时间。</li><li><strong>内置服务器端渲染</strong>：Nuxt具备内置的服务器端渲染能力，因此你不需要自己设置单独的服务器。</li><li><strong>自动导入</strong>：在各自的目录中编写Vue组件和可组合函数，并在使用时无需手动导入，享受树摇和优化JS捆绑包的好处。</li><li><strong>数据获取工具</strong>：Nuxt提供了可用于处理于服务器端渲染兼容的数据获取的可组合函数，以及不同的策略。</li><li><strong>零配置的TypeScript支持</strong>：可以编写类型安全的代码，无需学习TypeScript，因为我们提供了自动生成的类型和<code>tsconfig.json</code>配置文件。</li><li><strong>配置好的构建工具</strong>：我们默认使用Vite来支持开发中的热模块替换（HMR)，以及在生产中将代码打包成符合最佳实践的形式。</li></ul><p>Nuxt负责处理这些事情，并提供前端和后端的能力，让你可以专注于创建你的Web应用。</p><h3 id="服务器端渲染" tabindex="-1"><a class="header-anchor" href="#服务器端渲染" aria-hidden="true">#</a> 服务器端渲染</h3><p>Nuxt默认具备内置的服务器端渲染（SSR）能力，无需自己配置服务器，这对于Web应用有许多好处：</p><ul><li><strong>更快的初始页面加载时间</strong>：Nuxt向浏览器发送完全渲染的HTML页面，可以立即展示。这可以提供更快的页面加载时间和更好的用户体验（UX），特别是在网络或设备较慢的情况下。</li><li><strong>改善SEO</strong>：搜索引擎可以更好地索引SSR页面，因为HTML内容立即可用，而不需要依赖JavaScript在客户端渲染内容。</li><li><strong>在低功率设备上更好的性能</strong>：减少了需要再客户端下载和执行的JavaScript量，这对于处理重型JavaScript应用程序可能有困难得低功率设备非常有益。</li><li><strong>更好的可访问性</strong>：内容在初始页面加载时立即可用，改善了依赖屏幕阅读器或其他辅助技术的用户的可访问性。</li><li><strong>更容易得缓存</strong>：页面可以在服务器端缓存，这可以通过减少生成和发送内容所需的时间而进一步提高性能。</li></ul><p>总体而言，服务器端渲染可以提供更快更高效的用户体验，同时改善搜索引擎优化和可访问性。</p><p>由于Nuxt是一个多功能的框架，它允许你将整个应用程序静态渲染为静态托管，使用<code>nuxt generate</code>进行部署，通过<code>ssr: false</code>选项在全局禁用SSR，或通过设置<code>routeRules</code>选项来实现混合渲染。</p><h4 id="服务器引擎" tabindex="-1"><a class="header-anchor" href="#服务器引擎" aria-hidden="true">#</a> 服务器引擎</h4><p>Nuxt的服务器引擎Nitro开启了全新的全栈能力。</p><p>在开发中，它使用<code>Rollup</code>和<code>Node.js</code>工作线程来处理你的服务器代码和上下文隔离。它还通过读取<code>server/api/</code>中的文件生成你的服务器API，以及读取<code>server/middleware/</code>中的文件生成服务器中间件。</p><p>在生产中，Nitro将你的应用程序和服务器构建为一个通用的<code>.output</code>目录。这个输出所轻量级的；经过压缩，并且不包含任何Node.js模块（处理polyfills）。你可以将此输出部署到支持JavaScript的任何系统上，包括Node.js，无服务器（Serverless），Worders，边缘渲染或纯静态环境。</p><h4 id="生产就绪" tabindex="-1"><a class="header-anchor" href="#生产就绪" aria-hidden="true">#</a> 生产就绪</h4><p>Nuxt应用程序可以部署到<code>Node</code>或<code>Deno</code>服务器上，预渲染以在静态环境中托管，或部署到无服务器和边缘提供商。</p><h4 id="模块化" tabindex="-1"><a class="header-anchor" href="#模块化" aria-hidden="true">#</a> 模块化</h4><p>Nuxt的模块系统允许你扩展Nuxt以添加自定义功能和与第三方服务的集成。</p><h4 id="架构" tabindex="-1"><a class="header-anchor" href="#架构" aria-hidden="true">#</a> 架构</h4><p>Nuxt由不同的核心包组成：</p><ul><li>核心引擎：<code>nuxt</code></li><li>打包工具：<code>@nuxt/vite-builder</code>和<code>@nuxt/webpack-builder</code></li><li>命令行界面：<code>nuxi</code></li><li>服务器引擎：<code>nitro</code></li><li>开发工具包：<code>@nuxt/kit</code></li><li>Nuxt2桥接：<code>@nuxt/bridge</code></li></ul><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h2><h3 id="新项目" tabindex="-1"><a class="header-anchor" href="#新项目" aria-hidden="true">#</a> 新项目</h3><p><strong>先决条件</strong></p><ul><li>Node.js - <code>v16.10.0</code>或更高版本</li><li>文本编辑器</li><li>终端 - 用于运行Nuxt命令</li></ul><p>打开一个终端，并使用以下命令创建一个新的起步项目：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> dlx nuxi@latest init <span class="token operator">&lt;</span>project-name<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>打开项目文件夹：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>code <span class="token operator">&lt;</span>project-name<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装依赖：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 在运行 pnpm install 之前，请确保在 `.npmrc` 中设置了 `shamefully-hoist=true`</span>
<span class="token function">pnpm</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="开发服务器" tabindex="-1"><a class="header-anchor" href="#开发服务器" aria-hidden="true">#</a> 开发服务器</h3><p>现在你可以以开发模式启动你的Nuxt应用程序了。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> dev <span class="token parameter variable">-o</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="下一步" tabindex="-1"><a class="header-anchor" href="#下一步" aria-hidden="true">#</a> 下一步</h3><p>现在你可以创建了你的Nuxt3项目，你可以开始构建你的应用程序了。</p><h2 id="配置" tabindex="-1"><a class="header-anchor" href="#配置" aria-hidden="true">#</a> 配置</h2><p>默认情况下，Nuxt已经配置了大多数使用情况。<code>nuxt.config.ts</code>文件可以覆盖和扩展此默认配置。</p><h3 id="nuxt配置" tabindex="-1"><a class="header-anchor" href="#nuxt配置" aria-hidden="true">#</a> Nuxt配置</h3><p><code>nuxt.config.ts</code>文件位于Nuxt项目的根目录，可以覆盖或扩展应用程序的行为。</p><p>一个最简配置文件导出了<code>defineNuxtConfig</code>函数，函数中包含了一个配置对象。<code>defuneNuxtConfig</code>助手函数在全局范围内无需导入即可使用。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 我的nuxt配置</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通常在文件中会提到此文件，例如添加自定义脚本、注册模块或更改渲染模式。</p><h4 id="环境覆盖" tabindex="-1"><a class="header-anchor" href="#环境覆盖" aria-hidden="true">#</a> 环境覆盖</h4><p>你可以在<code>nuxt.config</code>中配置完全类型化的环境覆盖。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  $production<span class="token operator">:</span> <span class="token punctuation">{</span>
    routeRules<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;/**&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>isr<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    $development<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">//</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="环境变量和私有令牌" tabindex="-1"><a class="header-anchor" href="#环境变量和私有令牌" aria-hidden="true">#</a> 环境变量和私有令牌</h4><p><code>runtimeConfig</code>API将像环节变量这样的值暴露给应用程序的其余部分。默认情况下，这些键只在服务器端可用。<code>runtimeConfig.public</code>中的键也可以在客户端使用。</p><p>这些值应该在<code>nuxt.config</code>中定义，并可以使用环节变量进行覆盖。</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-248-0" aria-selected="true">nuxt.config.ts</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-248-1" aria-selected="false">.env</button></div><!--[--><div class="vp-code-tab active" id="codetab-248-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">nuxt.config.ts</div><!--[--><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  runtimeConfig<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 只在服务器端可用的私有键</span>
    apiSecret<span class="token operator">:</span> <span class="token string">&#39;123&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// public中的键也可以在客户端使用</span>
    <span class="token keyword">public</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      apiBase<span class="token operator">:</span> <span class="token string">&#39;/api&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-248-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">.env</div><!--[--><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 这将覆盖apiSecret的值</span>
<span class="token assign-left variable">NUXT_API_SECRET</span><span class="token operator">=</span>api_secret_token
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>这些变量通过<code>useRuntimeConfig()</code>组合函数暴露给应用程序的其余部分。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> runtimeConfig <span class="token operator">=</span> <span class="token function">useRuntimeConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="应用程序配置" tabindex="-1"><a class="header-anchor" href="#应用程序配置" aria-hidden="true">#</a> 应用程序配置</h3><p><code>app.config.ts</code>文件位于原目录中（默认为项目的根目录），用于公开在构建时确定的公共变量。与<code>runtimeConfig</code>选项不同，这些变量不能使用环节变量进行覆盖。</p><p>一个最简配置文件导出了<code>defineAppConfig</code>函数，函数中包含了一个配置对象。<code>defineAppConfig</code>助手函数在全局范围内无需导入即可使用。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineAppConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">&#39;Hello Nuxt&#39;</span><span class="token punctuation">,</span>
  theme<span class="token operator">:</span> <span class="token punctuation">{</span>
    dark<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    colors<span class="token operator">:</span> <span class="token punctuation">{</span>
      primary<span class="token operator">:</span> <span class="token string">&#39;#ff0000&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这些变量通过<code>useAppConfig</code>组合函数暴露给应用程序的其余部分。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> appConfig <span class="token operator">=</span> <span class="token function">useAppConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="runtimeconfig与appconfig" tabindex="-1"><a class="header-anchor" href="#runtimeconfig与appconfig" aria-hidden="true">#</a> runtimeConfig与appConfig</h3><p>如上所述，<code>runtimeConfig</code>和<code>app.config</code>都用于向应用程序的其余部分公开变量。为了确定应该使用其中之一，以下是一些指导原则：</p><ul><li><code>runtimeConfig</code>：需要在构建后使用环节变量指定的私有或公共令牌。</li><li><code>app.config</code>：在构建时确定的公共令牌，网站配置（如主题变体、标题）以及不敏感的项目配置等。</li></ul><table><thead><tr><th>功能</th><th><code>runtimeConfig</code></th><th><code>app.config</code></th></tr></thead><tbody><tr><td>客户端</td><td>已注入</td><td>已打包</td></tr><tr><td>环境变量</td><td>✅ 是</td><td>❌ 否</td></tr><tr><td>响应式</td><td>✅ 是</td><td>✅ 是</td></tr><tr><td>类型支持</td><td>✅ 部分</td><td>✅ 是</td></tr><tr><td>每个请求的配置</td><td>❌ 否</td><td>✅ 是</td></tr><tr><td>热模块替换</td><td>❌ 否</td><td>✅ 是</td></tr><tr><td>非原始JS类型</td><td>❌ 否</td><td>✅ 是</td></tr></tbody></table><h3 id="外部配置文件" tabindex="-1"><a class="header-anchor" href="#外部配置文件" aria-hidden="true">#</a> 外部配置文件</h3><p>Nuxt使用<code>nuxt.config.ts</code>文件作为配置的唯一来源，并跳过读取外部配置文件。在构建项目的过程中，你可能需要配置这些文件。下表列出了常见的配置以及如何在Nuxt中配置它们。</p><table><thead><tr><th>名称</th><th>配置文件</th><th>如何配置</th></tr></thead><tbody><tr><td>Nitro</td><td><s><code>nitro.config.ts</code></s></td><td>在<code>nuxt.config</code>中使用<code>nitro</code>键</td></tr><tr><td>postCss</td><td><s><code>postcss.config.ts</code></s></td><td>在<code>nuxt.config</code>中使用<code>postcss</code>键</td></tr><tr><td>Vite</td><td><s><code>vite.config.ts</code></s></td><td>在<code>nuxt.config</code>中使用<code>vite</code>键</td></tr><tr><td>webpack</td><td><s><code>webpack.config.ts</code></s></td><td>在<code>nuxt.config</code>中使用<code>webpack</code>键</td></tr></tbody></table><p>以下是其他常见配置文件的列表：</p><table><thead><tr><th>名称</th><th>配置文件</th></tr></thead><tbody><tr><td>TypeScript</td><td><code>tsconfig.json</code></td></tr><tr><td>ESLint</td><td><code>.eslintrc.js</code></td></tr><tr><td>Prettier</td><td><code>prettierrc.json</code></td></tr><tr><td>Stylelint</td><td><code>.stylelintrc.json</code></td></tr><tr><td>TailwindCss</td><td><code>tailwind.config.js</code></td></tr><tr><td>Vitest</td><td><code>vitest.config.ts</code></td></tr></tbody></table><h3 id="vue配置" tabindex="-1"><a class="header-anchor" href="#vue配置" aria-hidden="true">#</a> Vue配置</h3><h4 id="使用vite" tabindex="-1"><a class="header-anchor" href="#使用vite" aria-hidden="true">#</a> 使用Vite</h4><p>如果你需要传递选项给<code>@vitejs/plugin-vue</code>或<code>@vitejs/plugin-vue-jsx</code>，你可以在你的<code>nuxt.config</code>文件中进行配置。</p><ul><li><code>vite.vue</code>用于<code>@vitejs/plugin-vue</code>。</li><li><code>vite.vueJSx</code>用于<code>@vitejs/plugin-vue-jsx</code>。</li></ul><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">deinfeNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  vite<span class="token operator">:</span> <span class="token punctuation">{</span>
    vue<span class="token operator">:</span> <span class="token punctuation">{</span>
      customElement<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    vueJsx<span class="token operator">:</span> <span class="token punctuation">{</span>
      mergeProps<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="使用webpack" tabindex="-1"><a class="header-anchor" href="#使用webpack" aria-hidden="true">#</a> 使用webpack</h4><p>如果你使用webpack并且需要配置<code>vue-loader</code>，你可以在<code>nuxt.config</code>文件中使用<code>webpack.loaders.vue</code>键进行配置。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  webpack<span class="token operator">:</span> <span class="token punctuation">{</span>
    loaders<span class="token operator">:</span> <span class="token punctuation">{</span>
      vue<span class="token operator">:</span> <span class="token punctuation">{</span>
        hotReload<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="启用实验性vue功能" tabindex="-1"><a class="header-anchor" href="#启用实验性vue功能" aria-hidden="true">#</a> 启用实验性Vue功能</h4><p>你可能需要在Vue中启用实验性功能，例如<code>defineModel</code>或<code>propsDestructure</code>。无论你使用哪个构建工具，Nuxt都提供了一种简单的方法在<code>nuxt.config.ts</code>中进行配置：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  vue<span class="token operator">:</span> <span class="token punctuation">{</span>
    defineModel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    propsDestructure<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="视图" tabindex="-1"><a class="header-anchor" href="#视图" aria-hidden="true">#</a> 视图</h2><h3 id="app-vue" tabindex="-1"><a class="header-anchor" href="#app-vue" aria-hidden="true">#</a> <code>app.vue</code></h3><p><img src="https://nuxt.com.cn/assets/docs/getting-started/views/app.svg" alt=""></p><p>默认情况下，Nuxt将把这个文件视为入口点，并为应用程序的每个路由渲染其内容。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>欢迎来到首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="组件" tabindex="-1"><a class="header-anchor" href="#组件" aria-hidden="true">#</a> 组件</h3><p><img src="https://nuxt.com.cn/assets/docs/getting-started/views/components.svg" alt=""></p><p>大多数组件是可重用的用户界面组件，如按钮和菜单。在Nuxt中，你可以在<code>components/</code>目录中创建这些组件，它们将整个应用程序中可用无需显式地导入。</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-576-0" aria-selected="true">app.vue</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-576-1" aria-selected="false">components/AppAlert.vue</button></div><!--[--><div class="vp-code-tab active" id="codetab-576-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">app.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>欢迎来到首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppAlert</span><span class="token punctuation">&gt;</span></span>
      这是一个自动导入的组件。
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AppAlert</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-576-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">components/AppAlert.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="页面" tabindex="-1"><a class="header-anchor" href="#页面" aria-hidden="true">#</a> 页面</h3><p><img src="https://nuxt.com.cn/assets/docs/getting-started/views/pages.svg" alt=""></p><p>页面代表了每个特定路由模式的视图。<code>pages/</code>目录中的每个文件都表示一个不同的路由，显示其内容。</p><p>要使用页面，创建<code>pages/index.vue</code>文件并将<code>&lt;NuxtPage /&gt;</code>组件添加到<code>app.vue</code>（或者删除<code>app.vue</code>以使用默认入口）。现在，你可以通过在<code>pages/</code>目录中添加新文件来创建更多页面及其对应的路由。</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-596-0" aria-selected="true">pages/index.vue</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-596-1" aria-selected="false">pages/about.vue</button></div><!--[--><div class="vp-code-tab active" id="codetab-596-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">pages/index.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>欢迎来到首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppAlert</span><span class="token punctuation">&gt;</span></span>
      这是一个自动导入的组件。
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AppAlert</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-596-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">pages/about.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>此页面将显示在 /about 路由。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="布局" tabindex="-1"><a class="header-anchor" href="#布局" aria-hidden="true">#</a> 布局</h3><p><img src="https://nuxt.com.cn/assets/docs/getting-started/views/layouts.svg" alt=""></p><p>页面是布局的包装器，包含了多个页面的共同用户界面，如页眉和页脚。布局是使用<code>&lt;slot /&gt;</code>组件来显示<strong>页面</strong>内容的Vue文件。<code>layouts/default.vue</code>文件将被默认使用。自定义布局可以作为页面元数据的一部分进行设置。</p><div class="hint-container info"><p class="hint-container-title">相关信息</p><p>如果你的应用程序只有一个布局，我们建议使用<code>app.vue</code>和<code>&lt;NuxtPage/&gt;</code>。</p></div><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-618-0" aria-selected="true">layouts/default.vue</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-618-1" aria-selected="false">pages/index.vue</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-618-2" aria-selected="false">pages/about.vue</button></div><!--[--><div class="vp-code-tab active" id="codetab-618-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">layouts/default.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppHeader</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppFooter</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-618-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">pages/index.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>欢迎来到首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppAlert</span><span class="token punctuation">&gt;</span></span>
    这是一个自动导入的组件。
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AppAlert</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-618-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">pages/about.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>此页面将显示在 /about 路由。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="高级-扩展html模板" tabindex="-1"><a class="header-anchor" href="#高级-扩展html模板" aria-hidden="true">#</a> 高级：扩展HTML模板</h3><p>你可以通过添加一个Nitro插件来完全控制HTML模板，该插件注册一个钩子函数。<code>render:html</code>钩子函数的回调函数允许你在将HTML发送到客户端之前对其进行修改。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>response<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;express&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNitroPlugin</span><span class="token punctuation">(</span>nitroApp <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  nitroApp<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">hook</span><span class="token punctuation">(</span><span class="token string">&#39;render:html&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token punctuation">{</span>event<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这将是HTML模版的对象表示形式。</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>
    html<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;meta name=&quot;description&quot; content=&quot;My custom description&quot; /&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// 你也可以在这里拦截响应</span>
  nitroApp<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">hook</span><span class="token punctuation">(</span><span class="token string">&#39;render:response&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>response<span class="token punctuation">,</span> <span class="token punctuation">{</span>event<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="资源" tabindex="-1"><a class="header-anchor" href="#资源" aria-hidden="true">#</a> 资源</h2><p>Nuxt使用两个目录来处理样式表、字体或图片资源。</p><ul><li><code>public/</code>目录中的内容会按原样作为服务器根目录下的公共资源提供。</li><li><code>assets/</code>目录按约定包含了你希望构建工具（Vite或webpack）处理的所有资源。</li></ul><h3 id="公共目录" tabindex="-1"><a class="header-anchor" href="#公共目录" aria-hidden="true">#</a> 公共目录</h3><p><code>public/</code>目录作应用程序的公共服务器，用于存放在应用程序的指定URL下公开访问的静态资源。</p><p>你可以通过应用程序的代码或浏览器的根URL<code>/</code>获取<code>public/</code>目录中的文件。</p><h4 id="示例" tabindex="-1"><a class="header-anchor" href="#示例" aria-hidden="true">#</a> 示例</h4><p>例如，在<code>public/img/</code>目录中引用一个图像文件，该文件可通过静态URL<code>/img/nuxt.png</code>访问：</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/img/nuxt.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="资源目录" tabindex="-1"><a class="header-anchor" href="#资源目录" aria-hidden="true">#</a> 资源目录</h3><p>Nuxt使用Vite(默认)或webpack来构建和打包你的应用程序。这些构建工具的主要功能是处理JavaScript文件，但它们可以通过插件（对于Vite）或加载器（对于webpack）来处理其他类型的资源，如样式表、字体或SVG。此步骤主要是为了提高性能或缓存目的而对原始文件进行转换（例如样式表的缩小或浏览器缓存失效）。</p><p>按照约定，Nuxt使用<code>assets/</code>目录来存储这些文件，但该目录没有自动扫描功能，你可以使用任何其他名称。</p><p>在应用程序的代码中，你可以通过使用<code>~/assets/</code>路径来引用位于<code>assets/</code>目录中的文件。</p><h4 id="示例-1" tabindex="-1"><a class="header-anchor" href="#示例-1" aria-hidden="true">#</a> 示例</h4><p>例如，引用一个图像文件，如果构建工具配置为处理该文件扩展名：</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>~/assets/img/nuxt.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">相关信息</p><p>Nuxt不会将<code>assets/</code>目录中的文件作为静态URL(如<code>/assets/my-file.png</code>)提供。如果你需要一个静态URL,请使用<code>public/</code>目录。</p></div><h3 id="全局样式导入" tabindex="-1"><a class="header-anchor" href="#全局样式导入" aria-hidden="true">#</a> 全局样式导入</h3><p>要在你的Nuxt组件样式中全局插入语句，你可以在<code>nuxt.config</code>文件中使用<code>Vite</code>选项。</p><h4 id="示例-2" tabindex="-1"><a class="header-anchor" href="#示例-2" aria-hidden="true">#</a> 示例</h4><p>在这个示例中，有一个sass部分文件，其中包含颜色变量，供你的Nuxt页面和组件使用。</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-706-0" aria-selected="true">assets/_colors.scss</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-706-1" aria-selected="false">assets/_colors.sass</button></div><!--[--><div class="vp-code-tab active" id="codetab-706-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">assets/_colors.scss</div><!--[--><div class="language-scss line-numbers-mode" data-ext="scss"><pre class="language-scss"><code><span class="token property"><span class="token variable">$primary</span></span><span class="token punctuation">:</span> #49240F<span class="token punctuation">;</span>
<span class="token property"><span class="token variable">$secondary</span></span><span class="token punctuation">:</span> #E4A79D<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-706-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">assets/_colors.sass</div><!--[--><div class="language-sass line-numbers-mode" data-ext="sass"><pre class="language-sass"><code><span class="token variable-line"><span class="token variable">$primary</span><span class="token punctuation">:</span> #49240F</span>
<span class="token variable-line"><span class="token variable">$secondary</span><span class="token punctuation">:</span> #E4A79D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>在你的<code>nuxt.config</code>中</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-717-0" aria-selected="true">SCSS</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-717-1" aria-selected="false">SASS</button></div><!--[--><div class="vp-code-tab active" id="codetab-717-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">SCSS</div><!--[--><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  vite<span class="token operator">:</span> <span class="token punctuation">{</span>
    css<span class="token operator">:</span> <span class="token punctuation">{</span>
      preprocessorOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        scss<span class="token operator">:</span> <span class="token punctuation">{</span>
          additionalData<span class="token operator">:</span> <span class="token string">&#39;@use &quot;@/assets/_colors.scss&quot; as *;&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-717-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">SASS</div><!--[--><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  vite<span class="token operator">:</span> <span class="token punctuation">{</span>
    css<span class="token operator">:</span> <span class="token punctuation">{</span>
      preprocessorOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        sass<span class="token operator">:</span> <span class="token punctuation">{</span>
          additionalData<span class="token operator">:</span> <span class="token string">&#39;@use &quot;@/assets/_colors.sass&quot; as *\n&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h2 id="样式化" tabindex="-1"><a class="header-anchor" href="#样式化" aria-hidden="true">#</a> 样式化</h2><p>在样式化方面，Nuxt非常灵活。你可以编写自己的样式，或者引用本地和外部样式表。你可以使用CSS预处理器、CSS框架、UI库和Nuxt模块来为你的应用程序添加样式。</p><h3 id="本地样式表" tabindex="-1"><a class="header-anchor" href="#本地样式表" aria-hidden="true">#</a> 本地样式表</h3><p>如果你正在编写本地样式表，讲它们放在<code>assets/</code>目录是最自然的位置。</p><h4 id="在组件中引入" tabindex="-1"><a class="header-anchor" href="#在组件中引入" aria-hidden="true">#</a> 在组件中引入</h4><p>你可以在页面、布局和组件中直接引入样式表。你可以使用JavaScript的import，或者使用css的<code>@import</code>语句。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 使用静态导入以实现服务器端兼容性</span>
<span class="token keyword">import</span> <span class="token string">&#39;~/assets/css/first.css&#39;</span>

<span class="token comment">// 注意：动态导入不兼容服务器端</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;~/assets/css/first.css&#39;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&quot;~/assets/css/second.css&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>样式表将被内联到Nuxt渲染的HTML中。</p><h4 id="css属性" tabindex="-1"><a class="header-anchor" href="#css属性" aria-hidden="true">#</a> CSS属性</h4><p>你还可以使用Nuxt配置中的CSS属性。将你的样式表放在<code>assets/</code>目录是最自然的位置。然后你可以引用它的路径，Nuxt将会将它包含在应用程序的所有页面中。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  css<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;~/assets/css/main.css&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>样式表将被内嵌到Nuxt渲染的HTML中，全局注入并存在于所有页面中。</p><h4 id="使用字体" tabindex="-1"><a class="header-anchor" href="#使用字体" aria-hidden="true">#</a> 使用字体</h4><p>将本地字体文件放在<code>~/public/</code>目录中，例如<code>~/public/fonts</code>。然后可以在样式表中使用<code>url()</code>引用它们。</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&#39;FarAwayGalaxy&#39;</span><span class="token punctuation">;</span>
  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&#39;/fonts/FarAwayGalaxy.woff&#39;</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&#39;woff&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
  <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
  <span class="token property">font-display</span><span class="token punctuation">:</span> swap<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后再样式表、页面或组件中按名称引用你的字体：</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">h1</span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&#39;FarAwayGalaxy&#39;</span><span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="通过npm分发样式表" tabindex="-1"><a class="header-anchor" href="#通过npm分发样式表" aria-hidden="true">#</a> 通过NPM分发样式表</h4><p>你还可以引用通过npm分发的样式表。让我们以流行的<code>animate.css</code>库为例。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> animate.css
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后你可以直接在页面、布局和组件中引用它：</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token string">&#39;animate.css&#39;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&quot;animate.css&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你还可以将该包作为字符串引用到Nuxt配置的css属性中。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  css<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;animate.css&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="外部样式表" tabindex="-1"><a class="header-anchor" href="#外部样式表" aria-hidden="true">#</a> 外部样式表</h3><p>你可以通过在nuxt.config文件的head部分添加一个link元素来在应用程序中应用外部样式表。你可以使用不同的方法来实现这个目标。注意，本地样式表也可以以这种方式包含。</p><p>你可以通过Nuxt配置的<code>app.head</code>属性来修改head:</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  app<span class="token operator">:</span> <span class="token punctuation">{</span>
    head<span class="token operator">:</span> <span class="token punctuation">{</span>
      link<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          rel<span class="token operator">:</span> <span class="token string">&#39;stylesheet&#39;</span><span class="token punctuation">,</span>
          href<span class="token operator">:</span> <span class="token string">&#39;https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="动态添加样式表" tabindex="-1"><a class="header-anchor" href="#动态添加样式表" aria-hidden="true">#</a> 动态添加样式表</h4><p>你可以使用<code>usehead</code>组合式函数在代码中动态设置head中的值。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token function">useHead</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  link<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> rel<span class="token operator">:</span> <span class="token string">&#39;stylesheet&#39;</span><span class="token punctuation">,</span> href<span class="token operator">:</span> <span class="token string">&#39;https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Nuxt在内部使用<code>unhead</code>。</p><h4 id="使用nitro插件修改渲染的head" tabindex="-1"><a class="header-anchor" href="#使用nitro插件修改渲染的head" aria-hidden="true">#</a> 使用Nitro插件修改渲染的head</h4><p>如果你需要更高级的控制，你可以使用hook拦截渲染的html，并以编程方式修改head/</p><p>创建一个插件，放在<code>~/server/plugins/my-plugin.ts</code>中，像这样：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNitroPlugin</span><span class="token punctuation">(</span><span class="token punctuation">(</span>nitro<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  nitro<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">hook</span><span class="token punctuation">(</span><span class="token string">&#39;render:html&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>html<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    html<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css&quot;&gt;&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>外部样式表是渲染阻塞资源：它们必须在浏览器渲染页面之前加载和处理。包含过大样式的网页渲染时间更长。</p><h3 id="使用预处理器" tabindex="-1"><a class="header-anchor" href="#使用预处理器" aria-hidden="true">#</a> 使用预处理器</h3><p>要使用Scss/Sass/less或stylus等预处理器，首先要安装它。</p><p>编写样式表的自然位置是<code>assets</code>目录。然后，你可以使用你的预处理器的语法在你的<code>app.vue</code>（或布局文件）中导入你的源文件。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token atrule"><span class="token rule">@use</span> <span class="token string">&quot;~/assets/scss/main.scss&quot;</span><span class="token punctuation">;</span></span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者，你可以使用Nuxt配置的css属性。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  css<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;~/assets/scss/main.scss&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你需要再预处理文件中注入代码，比如包含颜色变量的sass部分，你可以使用Vite的preprocessors选项来实现。上文中有示例。</p><h3 id="单文件组件-sfc-样式化" tabindex="-1"><a class="header-anchor" href="#单文件组件-sfc-样式化" aria-hidden="true">#</a> 单文件组件（SFC）样式化</h3><p>Vue和SFC的最大优点之一就是在处理样式方面非常好用。你可以直接在组件文件的央视快中编写CSS或预处理器代码，因此你可以拥有出色的开发体验，而无需使用CSS-in-JS等工具。不过，如果你想使用CSS-in-JS，你可以找到支持它的第三方库和模块，比如pinceau。</p><h4 id="类和样式绑定" tabindex="-1"><a class="header-anchor" href="#类和样式绑定" aria-hidden="true">#</a> 类和样式绑定</h4><p>你可以利用Vue SFC的特性，使用<code>class</code>和<code>style</code>属性为组件添加样式。</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-845-0" aria-selected="true">Ref和Reactive</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-845-1" aria-selected="false">Computed</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-845-2" aria-selected="false">Array</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-845-3" aria-selected="false">Style</button></div><!--[--><div class="vp-code-tab active" id="codetab-845-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">Ref和Reactive</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> isActive <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> hasError <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> classObject <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string-property property">&#39;text-danger&#39;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>static<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{active: isActive, &#39;text-danger&#39;: hasError}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dov</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classObject<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dov</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-845-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">Computed</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> isActive <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> classObject <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">active</span><span class="token operator">:</span> isActive<span class="token punctuation">.</span>value <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>error<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
  <span class="token string-property property">&#39;text-danger&#39;</span><span class="token operator">:</span> error<span class="token punctuation">.</span>value <span class="token operator">&amp;&amp;</span> error<span class="token punctuation">.</span>value<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&#39;fatal&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classObject<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-845-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">Array</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"> 
<span class="token keyword">const</span> isActive <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> errorClass <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;text-danger&#39;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[{ active: isActive }, errorClass]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-845-3" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">Style</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> activeColor <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;red&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fontSize <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> styleObject <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&#39;red&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">&#39;13px&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ color: activeColor, fontSize: fontSize + &#39;px&#39; }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[baseStyles, overridingStyles]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>styleObject<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h4 id="使用v-bind动态样式" tabindex="-1"><a class="header-anchor" href="#使用v-bind动态样式" aria-hidden="true">#</a> 使用v-bind动态样式</h4><p>你可以在样式块中使用v-bind函数引用JavaScript变量和表达式。绑定将是动态的，这意味着如果变量值发生变化，样式将会更新。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.text</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">v-bind</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="作用域样式" tabindex="-1"><a class="header-anchor" href="#作用域样式" aria-hidden="true">#</a> 作用域样式</h4><p>scoped属性允许你将样式应用于组件内部。使用此属性声明的样式将只适用于该组件。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>example<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.example</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="css模块" tabindex="-1"><a class="header-anchor" href="#css模块" aria-hidden="true">#</a> CSS模块</h4><p>你可以使用module属性和CSS Modules。可以使用注入的$style变量访问它。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$style.red<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>This should be red<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">module</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.red</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="预处理器支持" tabindex="-1"><a class="header-anchor" href="#预处理器支持" aria-hidden="true">#</a> 预处理器支持</h4><p>SFC样式块支持预处理器语法。Vite内置支持<code>.scss</code>、<code>.sass</code>、<code>.less</code>、<code>.styl</code>和<code>.stylus</code>文件，无需配置，你只需要安装它们，然后在SFC中使用lang属性直接引用它们。</p><h3 id="使用postcss" tabindex="-1"><a class="header-anchor" href="#使用postcss" aria-hidden="true">#</a> 使用PostCSS</h3><p>Nuxt内置了Postcss。你可以在<code>nuxt.config</code>文件中配置它。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  postcss<span class="token operator">:</span> <span class="token punctuation">{</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;postcss-nested&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;postcss-custom-media&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为了在SFC中实现正确的语法高亮，你可以使用postcss lang属性。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>postcss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token comment">/* 在这里编写 stylus */</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>默认情况下，Nuxt已经预配置了以下插件：</p><ul><li>postcss-import: 改进了<code>@import</code>规则</li><li>postcss-url: 转换<code>url()</code>语句</li><li>autoprefixer: 自动添加产商前缀</li><li>cssnano: 压缩和清除无用的css</li></ul><h3 id="利用布局实现多样式" tabindex="-1"><a class="header-anchor" href="#利用布局实现多样式" aria-hidden="true">#</a> 利用布局实现多样式</h3><p>如果你需要完全不同的样式来样式化应用程序的不同部分，你可以使用布局。为不同的布局使用不同的样式。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default-layout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>默认布局<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.default-layout</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="第三方库和模块" tabindex="-1"><a class="header-anchor" href="#第三方库和模块" aria-hidden="true">#</a> 第三方库和模块</h3><p>Nuxt在样式化方面没有固定的意见，提供了各种各样的选择。你可以使用任何你想要的样式工具，比如流行的库UnoCSS或Tailwind CSS。</p><p>社区和Nuxt团队开发了许多Nuxt模块，以便更轻松的集成，你可以在网站的modules部分发现它们。以下是一些帮助你入门的模块：</p><ul><li>UnoCSS: 即时按需的原子CSS引擎</li><li>Tailwind CSS: 实用优先的CSS框架</li><li>Fontaine: 字体度量回退</li><li>Pinceau: 使用性样式框架</li><li>Nuxt UI: 现代Web应用程序的UI库</li></ul><p>Nuxt模块为你提供了良好的开发体验，但请记住，如果你喜欢的工具没有一个模块，这并不意味着你不能再Nuxt中使用它！你可以为自己的项目自行配置它。根据工具的不同，你可能需要使用Nuxt插件和/或制作自己的模块。如果你这样做了，请与社区分享！</p><h4 id="轻松加载web字体" tabindex="-1"><a class="header-anchor" href="#轻松加载web字体" aria-hidden="true">#</a> 轻松加载Web字体</h4><p>你可以使用Nuxt Google Fonts模块来加载Google字体。</p><p>如果你正在使用UnoCSS，请注意它附带了一个Web字体预设，方便地从常见提供商加载字体。</p><h3 id="进阶" tabindex="-1"><a class="header-anchor" href="#进阶" aria-hidden="true">#</a> 进阶</h3><h4 id="过渡效果" tabindex="-1"><a class="header-anchor" href="#过渡效果" aria-hidden="true">#</a> 过渡效果</h4><p>Nuxt拥有与Vue相同的<code>&lt;transition&gt;</code>元素，并且还支持实验性的View Transitions API。</p><h4 id="字体高级优化" tabindex="-1"><a class="header-anchor" href="#字体高级优化" aria-hidden="true">#</a> 字体高级优化</h4><p>我们建议使用Fontaine来减少你的CLS。如果你需要更高级的功能，可以考虑创建一个Nuxt模块来扩展构建过程或Nuxt运行时。</p><div class="hint-container info"><p class="hint-container-title">始终记得利用web生态系统中可用的各种工具和技术，使你的应用程序的样式更加简单高效。无论你是使用原生CSS、预处理器、PostCSS、UI库还是模块，Nuxt都能满足你的需求。祝你样式编写愉快！</p></div><h4 id="lcp高级优化" tabindex="-1"><a class="header-anchor" href="#lcp高级优化" aria-hidden="true">#</a> LCP高级优化</h4><p>你可以采取以下措施来加快全局CSS文件的下载速度：</p><ul><li>使用CDN，让文件物理上更接近你的用户</li><li>压缩你的资源，最好使用Brotli</li><li>使用HTTP2/HTTP3进行传递</li><li>将你的资源托管在同一个域名下（不要使用不同的子域名）</li></ul><p>如果你正在使用Cloudflare、Netlify或Vercel等现代平台，大多数情况下这些事情应该会自动完成。 你可以在web.dev上找到一个LCP优化指南。</p><p>如果你的所有CSS都由Nuxt内联，你可以（实验性地）完全停止在渲染的HTML中引用外部CSS文件。 你可以通过一个钩子来实现，你可以将它放在一个模块中或者你的Nuxt配置文件中。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  hooks<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;build:manifest&#39;</span><span class="token operator">:</span> <span class="token punctuation">(</span>manifest<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 找到应用程序入口的CSS列表</span>
      <span class="token keyword">const</span> css <span class="token operator">=</span> manifest<span class="token punctuation">[</span><span class="token string">&#39;node_modules/nuxt/dist/app/entry.js&#39;</span><span class="token punctuation">]</span><span class="token operator">?.</span>css
      <span class="token keyword">if</span> <span class="token punctuation">(</span>css<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 从数组的末尾开始，向前遍历</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> css<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 如果以&#39;entry&#39;开头，从列表中删除它</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>css<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&#39;entry&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> css<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="路由" tabindex="-1"><a class="header-anchor" href="#路由" aria-hidden="true">#</a> 路由</h2><p>Nuxt的核心功能之一是文件系统路由。<code>pages/</code>目录中的每个Vue文件都会创建一个相应的URL(或路由)，用于显示文件的内容。通过为每个页面使用动态导入，Nuxt利用代码分割来仅加载所需路由的最小量JavaScript。</p><h3 id="页面-1" tabindex="-1"><a class="header-anchor" href="#页面-1" aria-hidden="true">#</a> 页面</h3><p>Nuxt的路由基于<code>vue-router</code>，根据<code>pages/</code>目录中创建的每个组件的文件名生成路由。</p><p>文件系统路由使用命名约定来创建动态和嵌套路由。</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-1044-0" aria-selected="true">目录结构</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-1044-1" aria-selected="false">生成的路由文件</button></div><!--[--><div class="vp-code-tab active" id="codetab-1044-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">目录结构</div><!--[--><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">|</span> pages/
---<span class="token operator">|</span> about.vue
---<span class="token operator">|</span> index.vue
---<span class="token operator">|</span> posts/
-----<span class="token operator">|</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span>.vue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-1044-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">生成的路由文件</div><!--[--><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;routes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/about&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;component&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/about.vue&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;component&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/index.vue&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/posts/:id&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;component&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/posts/[id].vue&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="导航" tabindex="-1"><a class="header-anchor" href="#导航" aria-hidden="true">#</a> 导航</h3><p><code>&lt;NuxtLink&gt;</code>组件用于在页面直接创建连接。它会将<code>&lt;a&gt;</code>标签渲染为具有<code>href</code>属性设置为页面的路由。一旦应用程序被渲染，页面的切换将在JavaScript中进行，通过更新浏览器URL来实现。这样可以避免整页刷新，同时允许实现动画过渡效果。</p><p>当<code>&lt;NuxtLink&gt;</code>在客户端视口中可见时，Nuxt会自动预取链接页面的组件和负载（生成的页面），从而加快导航速度。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>关于<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NuxtLink</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/posts/1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>文章1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NuxtLink</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/posts/2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>文章2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NuxtLink</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="路由参数" tabindex="-1"><a class="header-anchor" href="#路由参数" aria-hidden="true">#</a> 路由参数</h3><p><code>useRoute()</code>组合式函数可在Vue组件的<code>&lt;script setup&gt;</code>块或<code>setup()</code>方法中使用，以访问当前路由的详细信息。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 当访问/posts/1时，route.params.id将为1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="路由中间件" tabindex="-1"><a class="header-anchor" href="#路由中间件" aria-hidden="true">#</a> 路由中间件</h3><p>Nuxt提供了一个可自定义的路由中间件框架，您可以在应用程序中使用，非常适合提取在导航到特定路由之前要运行的代码。</p><div class="hint-container info"><p class="hint-container-title">路由中间件在Nuxt应用程序的Vue部分中运行。尽管名称相似，但它们与在应用程序的Nitro服务器部分中运行的服务器中间件完全不同。</p></div><p>有三种类型的路由中间件：</p><ol><li>匿名（或内联）路由中间件，直接在使用它们的页面中定义。</li><li>命名路由中间件，放置在<code>middleware/</code>目录中，当在页面中使用时，会通过异步导入自动加载。（注意：路由中间件名称会转换为短横线分隔命名，因此<code>someMiddleware</code>会变成<code>some-middleware</code>）</li><li>全局路由中间件，放置在<code>middleware/</code>目录中（使用<code>.global</code>后缀），将在每次路由更改时自动运行。</li></ol><p>以下是保护<code>/dashboard</code>页面的<code>auth</code>中间件的示例：</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-1100-0" aria-selected="true">middleware/auth.ts</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-1100-1" aria-selected="false">pages/dashboard.vue</button></div><!--[--><div class="vp-code-tab active" id="codetab-1100-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">middleware/auth.ts</div><!--[--><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtRouteMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// isAuthenticated()是一个验证用户是否已经认证的示例方法</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-1100-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">pages/dashboard.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token function">definePageMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">middleware</span><span class="token operator">:</span> <span class="token string">&#39;auth&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>欢迎来到您的仪表盘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="路由验证" tabindex="-1"><a class="header-anchor" href="#路由验证" aria-hidden="true">#</a> 路由验证</h3><p>Nuxt通过每个要验证的页面中的<code>definePageMeta()</code>的<code>validate</code>属性提供路由验证。</p><p><code>validate</code>属性接受route作为参数。您可以返回一个布尔值来确定是否将此路由视为有效路由以渲染此页面。如果返回<code>false</code>，并且找不到其他匹配项，这将导致404错误。您还可以直接返回一个带有<code>statusCode</code>/<code>statusMessage</code>的对象以立即响应错误（其他匹配项将不会被检查）。</p><p>如果你有更复杂的用例，可以使用匿名路由中间件代替。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token function">definePageMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">validate</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">route</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 检查id是否由数字组成</span>
    <span class="token keyword">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="seo和meta" tabindex="-1"><a class="header-anchor" href="#seo和meta" aria-hidden="true">#</a> SEO和Meta</h2><p>使用强大的头部配置、组合函数和组件来提升你的Nuxt应用的SEO。</p><h3 id="默认值" tabindex="-1"><a class="header-anchor" href="#默认值" aria-hidden="true">#</a> 默认值</h3><p>Nuxt提供了合理的默认值，如果需要的话，你可以进行覆盖。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  app<span class="token operator">:</span> <span class="token punctuation">{</span>
    head<span class="token operator">:</span> <span class="token punctuation">{</span>
      charset<span class="token operator">:</span> <span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">,</span>
      viewport<span class="token operator">:</span> <span class="token string">&#39;width=device-width, initial-scale=1&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在你的<code>nuxt.config.ts</code>文件中提供<code>app.head</code>属性，可以自定义整个应用的头部。</p><div class="hint-container info"><p class="hint-container-title">该方法不允许你提供响应式数据。我们建议在`app.vue`中使用`useHead()`。</p></div><p>为了使配置更简单，可以使用快捷方式：<code>charset</code>和<code>viewport</code>。你还可以在类型中提供下面列出的任何键。</p><h3 id="usehead" tabindex="-1"><a class="header-anchor" href="#usehead" aria-hidden="true">#</a> <code>useHead</code></h3><p><code>useHead</code>组合函数允许你以编程和响应式的方式管理头部标签，它由<code>Unhead</code>提供支持。</p><p>和所有组合函数一样，它只能在组件的<code>setup</code>和生命周期钩子中使用。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token function">useHead</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;我的应用&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;description&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">&#39;我的神奇网站。&#39;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bodyAttrs</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">&#39;test&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token literal-property property">innerHTML</span><span class="token operator">:</span> <span class="token string">&#39;console.log(\&#39;Hello world\&#39;)&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们建议查看<code>useHead</code>和<code>useHeadSafe</code>组合函数。</p><h3 id="useseometa" tabindex="-1"><a class="header-anchor" href="#useseometa" aria-hidden="true">#</a> <code>useSeoMeta</code></h3><p><code>useSeoMeta</code>组合函数允许你将站点的SEO元标签定义为一个扁平的对象，并提供完整的TypeScript支持。</p><p>这有助于避免拼写错误和常见错误，比如使用<code>name</code>而不是<code>property</code>。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token function">useSeoMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;我的神奇网站&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ogTitle</span><span class="token operator">:</span> <span class="token string">&#39;我的神奇网站&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">&#39;这是我的神奇网站，让我来告诉你关于它的一切。&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ogDescription</span><span class="token operator">:</span> <span class="token string">&#39;这是我的神奇网站，让我来告诉你关于它的一切。&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ogImage</span><span class="token operator">:</span> <span class="token string">&#39;https://example.com/image.png&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">twitterCard</span><span class="token operator">:</span> <span class="token string">&#39;summary_large_image&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="组件-1" tabindex="-1"><a class="header-anchor" href="#组件-1" aria-hidden="true">#</a> 组件</h3><p>Nuxt提供了<code>&lt;Title&gt;</code>、<code>&lt;Base&gt;</code>、<code>&lt;NoScript&gt;</code>、<code>&lt;Style&gt;</code>、<code>&lt;Meta&gt;</code>、<code>&lt;Link&gt;</code>、<code>&lt;Body&gt;</code>、<code>&lt;Html&gt;</code>和<code>&lt;Head&gt;</code>组件，让你可以直接在组件的模板中与元数据进行交互。</p><p>由于这些组件名称与原生HTML元素相匹配，在模板中将它们大写非常重要。</p><p><code>&lt;Head&gt;</code>和<code>&lt;Body&gt;</code>可以接受嵌套的元标签（出于美观的原因），但这对最终HTML中嵌套的元标签的渲染位置没有影响。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;你好，世界&#39;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Head</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Title</span><span class="token punctuation">&gt;</span></span>{{title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Title</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">children</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>body {background: green;}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>{{title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="类型" tabindex="-1"><a class="header-anchor" href="#类型" aria-hidden="true">#</a> 类型</h3><p>下面是用于<code>useHead</code>、<code>app.head</code>和组件的非响应式类型。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">MetaObject</span> <span class="token punctuation">{</span>
  title<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
  titleTemplate<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>title<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token punctuation">)</span>
  templateParams<span class="token operator">?</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span> <span class="token operator">|</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;&gt;</span>
  base<span class="token operator">?</span><span class="token operator">:</span> Base
  link<span class="token operator">?</span><span class="token operator">:</span> Link<span class="token punctuation">[</span><span class="token punctuation">]</span>
  meta<span class="token operator">?</span><span class="token operator">:</span> Meta<span class="token punctuation">[</span><span class="token punctuation">]</span>
  style<span class="token operator">?</span><span class="token operator">:</span> Style<span class="token punctuation">[</span><span class="token punctuation">]</span>
  script<span class="token operator">?</span><span class="token operator">:</span> Script<span class="token punctuation">[</span><span class="token punctuation">]</span>
  noscript<span class="token operator">?</span><span class="token operator">:</span> Noscript<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  htmlAttrs<span class="token operator">?</span><span class="token operator">:</span> HtmlAttributes<span class="token punctuation">;</span>
  bodyAttrs<span class="token operator">?</span><span class="token operator">:</span> BodyAttributes<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更详细的类型信息请参考 @unhead/schema。</p><h3 id="功能" tabindex="-1"><a class="header-anchor" href="#功能" aria-hidden="true">#</a> 功能</h3><h4 id="响应式" tabindex="-1"><a class="header-anchor" href="#响应式" aria-hidden="true">#</a> 响应式</h4><p>所有属性都支持响应式，包括计算属性、getter和响应式。</p><p>建议使用<code>getter(() =&gt; value)</code>而不是计算属性<code>computed(() =&gt; value)</code>。</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-1200-0" aria-selected="true">useHead</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-1200-1" aria-selected="false">useSeoMeta</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-1200-2" aria-selected="false">Components</button></div><!--[--><div class="vp-code-tab active" id="codetab-1200-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">useHead</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> description <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;我的神奇网站。&#39;</span><span class="token punctuation">)</span>

<span class="token function">useHead</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;description&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">content</span><span class="token operator">:</span> description <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-1200-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">useSeoMeta</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> description <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;我的神奇网站。&#39;</span><span class="token punctuation">)</span>

<span class="token function">useSeoMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  description
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-1200-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">Components</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> description <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;我的神奇网站。&#39;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h4 id="标题模板" tabindex="-1"><a class="header-anchor" href="#标题模板" aria-hidden="true">#</a> 标题模板</h4><p>你可以使用<code>titleTemplate</code>选项来提供一个动态模板，以自定义站点的标题，例如在每个页面的标题中添加站点名称。</p><p><code>titleTemplate</code>可以是一个字符串，其中<code>%s</code>会被标题替换，也可以是一个函数。</p><p>如果你想使用一个函数（以获得更多的控制），那么它不能在<code>nuxt.config</code>中设置，而是建议在<code>app.vue</code>文件中设置，这样它将适用于你站点上的所有页面：</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token function">useHead</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">titleTemplate</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">titleChunk</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> titleChunk <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>titleChunk<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> - 网站名称</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">&#39;网站名称&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在，如果你在你站点的另一个页面上使用<code>useHead</code>将标题设置为<code>我的页面</code>，在浏览器标签中，标题将显示为<code>我的页面 - 网站名称</code>。你还可以传递<code>null</code>来使用默认的站点标题。</p><h4 id="body标签" tabindex="-1"><a class="header-anchor" href="#body标签" aria-hidden="true">#</a> Body标签</h4><p>你可以在适用的标签上使用<code>tagPosition: &#39;bodyClose&#39;</code>选项将它们附件到<code>&lt;body&gt;</code>标签的末尾。</p><p>例如：</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token function">useHead</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">&#39;https://third-party-script.com&#39;</span><span class="token punctuation">,</span>
      <span class="token comment">// 有效选项为：&#39;head&#39; | &#39;bodyClose&#39; | &#39;bodyOpen&#39;</span>
      <span class="token literal-property property">tagPosition</span><span class="token operator">:</span> <span class="token string">&#39;bodyClose&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="示例-3" tabindex="-1"><a class="header-anchor" href="#示例-3" aria-hidden="true">#</a> 示例</h3><h4 id="使用definepagemeta" tabindex="-1"><a class="header-anchor" href="#使用definepagemeta" aria-hidden="true">#</a> 使用<code>definePageMeta</code></h4><p>在你的<code>pages/</code>目录下，你可以使用<code>definePageMeta</code>和<code>useHead</code>来根据当前路由设置元数据。</p><p>例如，你可以先设置当前页面的标题（这是在构建时通过宏提取的，因此不能动态设置）：</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token function">definePageMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;某个页面&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后在你的布局文件中，你可以使用之前设置的路由元数据：</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">useHead</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">property</span><span class="token operator">:</span> <span class="token string">&#39;og:title&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">应用名称 - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="动态标题" tabindex="-1"><a class="header-anchor" href="#动态标题" aria-hidden="true">#</a> 动态标题</h4><p>在下面的示例中，<code>titleTemplate</code>可以被设置为带有<code>%s</code>占位符的字符串，也可以被设置为一个函数，这样可以更灵活地为你的Nuxt应用的每个路由动态设置页面标题：</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token function">useHead</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 作为字符串，</span>
  <span class="token comment">// 其中`%s`会被标题替换</span>
  <span class="token literal-property property">titleTemplate</span><span class="token operator">:</span> <span class="token string">&#39;%s - 网站标题&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// ... 或者作为一个函数</span>
  <span class="token function-variable function">titleTemplate</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">productCategory</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> productCategory
      <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>productCategory<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> - 网站标题</span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">:</span> <span class="token string">&#39;网站标题&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>nuxt.config</code>也可以用作设置页面标题的替代方法。然而，<code>nuxt.config</code>不允许页面标题是动态的。因此，建议在<code>app.vue</code>文件中使用<code>titleTemplate</code>来添加动态标题，然后应用于你的Nuxt应用的所有路由。</p><h4 id="外部css" tabindex="-1"><a class="header-anchor" href="#外部css" aria-hidden="true">#</a> 外部CSS</h4><p>下面的示例展示了如何使用<code>useHead</code>组合式函数的<code>link</code>属性或使用<code>&lt;Link&gt;</code>组件来启用Google Fonts：</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-1270-0" aria-selected="true">useHead</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-1270-1" aria-selected="false">Components</button></div><!--[--><div class="vp-code-tab active" id="codetab-1270-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">useHead</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token function">useHead</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">rel</span><span class="token operator">:</span> <span class="token string">&#39;preconnect&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">&#39;https://fonts.googleapis.com&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">rel</span><span class="token operator">:</span> <span class="token string">&#39;stylesheet&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">&#39;https://fonts.googleapis.com/css2?family=Roboto&amp;display=swap&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">crossorigin</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-1270-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">Components</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preconnect<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://fonts.googleapis.com<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://fonts.googleapis.com/css2?family=Roboto&amp;display=swap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h2 id="过渡效果-1" tabindex="-1"><a class="header-anchor" href="#过渡效果-1" aria-hidden="true">#</a> 过渡效果</h2><p>使用Vue或本地浏览器的视图过渡在页面和布局之间应用过渡效果。</p><div class="hint-container info"><p class="hint-container-title">Nuxt利用Vue的Transition组件在页面和布局之间应用过渡效果。</p></div><h3 id="页面过渡" tabindex="-1"><a class="header-anchor" href="#页面过渡" aria-hidden="true">#</a> 页面过渡</h3><p>你可以启用页面过渡来为所有的页面应用自动过渡效果。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  app<span class="token operator">:</span> <span class="token punctuation">{</span>
    pageTansition<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">&#39;page&#39;</span><span class="token punctuation">,</span> mode<span class="token operator">:</span> <span class="token string">&#39;out-in&#39;</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">如果你同时更改布局和页面，这里设置的页面过渡效果将不会运行。相反，你应该设置布局过渡效果。</p></div><p>要开始在页面之间添加过渡效果，请在你的<code>app.vue</code>文件中添加以下CSS:</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-1298-0" aria-selected="true">app.vue</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-1298-1" aria-selected="false">pages/index.vue</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-1298-2" aria-selected="false">pages/about.vue</button></div><!--[--><div class="vp-code-tab active" id="codetab-1298-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">app.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtPage</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.page-enter-active,
  .page-leave-active</span> <span class="token punctuation">{</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all .4s<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.page-enter-from,
  .page-leave-to</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">blur</span><span class="token punctuation">(</span>1rem<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-1298-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">pages/index.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>关于页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NuxtLink</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-1298-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">pages/about.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tempalte</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>关于也， <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NuxtLink</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tempalte</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>在页面之间导航时，将产生如下结果：</p><video controls class="rounded" poster="https://res.cloudinary.com/nuxt/video/upload/v1665061349/nuxt3/nuxt3-page-transitions_umwvmh.jpg"><source src="https://res.cloudinary.com/nuxt/video/upload/v1665061349/nuxt3/nuxt3-page-transitions_umwvmh.mp4" type="video/mp4"></video><p>要为页面设置不同的过渡效果，请在页面的<code>definePageMeta</code>中设置<code>pageTransition</code>键：</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-1316-0" aria-selected="true">pages/about.vue</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-1316-1" aria-selected="false">app.vue</button></div><!--[--><div class="vp-code-tab active" id="codetab-1316-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">pages/about.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token function">definePageMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">pageTransition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;rotate&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-1316-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">app.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtPage</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token comment">/* ... */</span>
<span class="token selector">.rotate-enter-active,
.rotate-leave-active</span> <span class="token punctuation">{</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 0.4s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.rotate-enter-from,
.rotate-leave-to</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate3d</span><span class="token punctuation">(</span>1<span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 15deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>切换到关于页面时，将添加3D旋转效果：</p><video controls class="rounded" poster="https://res.cloudinary.com/nuxt/video/upload/v1665063233/nuxt3/nuxt3-page-transitions-cutom.jpg"><source src="https://res.cloudinary.com/nuxt/video/upload/v1665063233/nuxt3/nuxt3-page-transitions-cutom.mp4" type="video/mp4"></video><h3 id="布局过渡" tabindex="-1"><a class="header-anchor" href="#布局过渡" aria-hidden="true">#</a> 布局过渡</h3><p>你可以启用布局过渡来为所有的布局应用自动过渡效果。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  app<span class="token operator">:</span> <span class="token punctuation">{</span>
    layoutTramsition<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">&#39;layout&#39;</span><span class="token punctuation">,</span> mode<span class="token operator">:</span> <span class="token string">&#39;out-in&#39;</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>要开始在页面和布局之间添加过渡效果，请在你的<code>app.vue</code>文件中添加以下CSS:</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-1338-0" aria-selected="true">app.vue</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-1338-1" aria-selected="false">layouts/default.vue</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-1338-2" aria-selected="false">layouts/orange.vue</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-1338-3" aria-selected="false">pages/index.vue</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-1338-4" aria-selected="false">pages/about.vue</button></div><!--[--><div class="vp-code-tab active" id="codetab-1338-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">app.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtLayout</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtPage</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NuxtLayout</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.layout-enter-active,
.layout-leave-active</span> <span class="token punctuation">{</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 0.4s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.layout-enter-from,
.layout-leave-to</span> <span class="token punctuation">{</span>
  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">grayscale</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-1338-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">layouts/default.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">&gt;</span></span>默认布局<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">div</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> lightgreen<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-1338-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">layouts/orange.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">&gt;</span></span>橙色布局<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">div</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #eebb90<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-1338-3" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">pages/index.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code>**<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>关于页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NuxtLink</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-1338-4" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">pages/about.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token function">definePageMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">layout</span><span class="token operator">:</span> <span class="token string">&#39;orange&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>关于页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NuxtLink</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>在页面之间导航时，将产生如下结果：</p><video controls class="rounded" poster="https://res.cloudinary.com/nuxt/video/upload/v1665065289/nuxt3/nuxt3-layouts-transitions_c9hwlx.jpg"><source src="https://res.cloudinary.com/nuxt/video/upload/v1665065289/nuxt3/nuxt3-layouts-transitions_c9hwlx.mp4" type="video/mp4"></video><p>与<code>pageTransition</code>类似，你可以使用<code>definePageMeta</code>将自定义的<code>layoutTransition</code>应用到页面组件：</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token function">definePageMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">layout</span><span class="token operator">:</span> <span class="token string">&#39;orange&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">layoutTransition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;slide-in&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="全局设置" tabindex="-1"><a class="header-anchor" href="#全局设置" aria-hidden="true">#</a> 全局设置</h3><p>你可以使用<code>nuxt.config</code>全局自定义这些默认的过渡效果名称。</p><p><code>pageTransition</code>和<code>layoutTransition</code>键都接受<code>transitionProps</code>作为JSON可序列化的值，你可以通过它传递自定义CSS过渡的<code>name</code>、<code>mode</code>和其他有效的过渡属性。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  app<span class="token operator">:</span> <span class="token punctuation">{</span>
    pageTransition<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#39;fade&#39;</span><span class="token punctuation">,</span>
      mode<span class="token operator">:</span> <span class="token string">&#39;out-in&#39;</span> <span class="token comment">// 默认值</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    layoutTransition<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&#39;slide&#39;</span><span class="token punctuation">,</span>
      mode<span class="token operator">:</span> <span class="token string">&#39;out-in&#39;</span> <span class="token comment">// 默认值</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">如果你更改了name属性，你还必须响应的重新命名CSS类。</p></div><p>要覆盖全局过渡效果，使用<code>definePageMeta</code>为单个Nuxt页面定义页面或布局过渡，并覆盖在<code>nuxt.config</code>文件中全局定义的任何页面或布局过渡。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token function">definePageMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">pageTransition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;bounce&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;out-in&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="禁用过渡效果" tabindex="-1"><a class="header-anchor" href="#禁用过渡效果" aria-hidden="true">#</a> 禁用过渡效果</h3><p>可以为特定的路由禁用<code>pageTransition</code>和<code>layoutTransition</code>：</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token function">definePageMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">pageTransition</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">layoutTransition</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或在<code>nuxt.config</code>中全局禁用：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  app<span class="token operator">:</span> <span class="token punctuation">{</span>
    pageTransition<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    layoutTransition<span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="javascript钩子" tabindex="-1"><a class="header-anchor" href="#javascript钩子" aria-hidden="true">#</a> JavaScript钩子</h3><p>对于高级用例，你可以使用JavaScript钩子为Nuxt页面创建高度动态和自定义的过渡效果。</p><p>这种方式非常适合使用FSAP等JavaScript动画库。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token function">definePageMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">pageTransition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;custom-flip&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;out-in&#39;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">onBeforeEnter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;进入之前...&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">onEnter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">onAfterEnter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="动画过渡效果" tabindex="-1"><a class="header-anchor" href="#动画过渡效果" aria-hidden="true">#</a> 动画过渡效果</h3><p>要使用条件逻辑应用动态过渡效果，你可以利用内联<code>middleware</code>将不同的过渡名称分配给<code>to.meta.pageTransition</code>。</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-1406-0" aria-selected="true">pages/[id].vue</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-1406-1" aria-selected="false">layouts/default.vue</button></div><!--[--><div class="vp-code-tab active" id="codetab-1406-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">pages/[id].vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token function">definePageMeta</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">pageTransition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;slide-right&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;out-in&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">middleware</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>pageTransition<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token operator">+</span>to<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id <span class="token operator">&gt;</span> <span class="token operator">+</span>from<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id <span class="token operator">?</span> <span class="token string">&#39;slide-left&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;slide-right&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>#{{ $route.params.id }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.slide-left-enter-active,
.slide-left-leave-active,
.slide-right-enter-active,
.slide-right-leave-active</span> <span class="token punctuation">{</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 0.2s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.slide-left-enter-from</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>50px<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.slide-left-leave-to</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50px<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.slide-right-enter-from</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50px<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.slide-right-leave-to</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>50px<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-1406-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">layouts/default.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">Number</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> prev <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;/&#39;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>id<span class="token punctuation">.</span>value <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> next <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;/&#39;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>id<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$route.params.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtLink</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>⬅️<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NuxtLink</span><span class="token punctuation">&gt;</span></span> |
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtLink</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>next<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>➡️<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NuxtLink</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>页面现在前往下一个id时应用<code>slide-left</code>过渡效果，在前一个id时应用<code>slide-right</code>过渡效果：</p><video controls class="rounded" poster="https://res.cloudinary.com/nuxt/video/upload/v1665069410/nuxt3/nuxt-dynamic-page-transitions.jpg"><source src="https://res.cloudinary.com/nuxt/video/upload/v1665069410/nuxt3/nuxt-dynamic-page-transitions.mp4" type="video/mp4"></video><h3 id="使用nuxtpage的过渡效果" tabindex="-1"><a class="header-anchor" href="#使用nuxtpage的过渡效果" aria-hidden="true">#</a> 使用NuxtPage的过渡效果</h3><p>当在<code>app.vue</code>中使用<code>&lt;NuxtPage /&gt;</code>时，可以直接将过渡属性作为组件属性传递以激活全局过渡效果。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtLayout</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtPage</span> <span class="token attr-name">:transition</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{
        name: &#39;bounce&#39;,
        mode: &#39;out-in&#39;
      }<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NuxtLayout</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">请记住，此页面过渡效果无法通过在单个页面上使用definePageMeta来覆盖。</p></div><h3 id="视图过渡api-实验性" tabindex="-1"><a class="header-anchor" href="#视图过渡api-实验性" aria-hidden="true">#</a> 视图过渡API(实验性)</h3><p>nuxt附带了一个实验性的视图过渡API。这是一种令人兴奋的新方法，用于实现本地浏览器过渡效果，它具有在不同页面的相关元素之间进行过渡的能力，以及其他功能。</p><p>Nuxt的集成正在积极开发中，但可以通过配置文件中的<code>experimental.viewTransition</code>选项启用：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  experimental<span class="token operator">:</span> <span class="token punctuation">{</span>
    viewTransition<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你还使用了类似于<code>pageTransition</code>和<code>layoutTransition</code>（参见上文）的Vue过渡效果来实现与新的视图过渡API相同的结果，那么你可能希望在用户的浏览器支持较新的本地Web API时_禁用_Vue过渡效果。你可以通过创建<code>~/middleware/disable-vue-transitions.global.ts</code>文件并包含以下内容来实现：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtRouteMiddleware</span><span class="token punctuation">(</span>to <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>document<span class="token punctuation">.</span>startViewTransition<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">}</span>

  <span class="token comment">// 禁用内置的Vue过渡效果</span>
  to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>pageTransition <span class="token operator">=</span> <span class="token boolean">false</span>
  to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>layoutTransition <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="已知问题" tabindex="-1"><a class="header-anchor" href="#已知问题" aria-hidden="true">#</a> 已知问题</h4><ul><li>由于上游Vue的一个<a href="https://github.com/vuejs/core/issues/5513" target="_blank" rel="noopener noreferrer">bug<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，视图过渡可能无法按预期工作，特别是在嵌套页面/布局/异步组件中。如果你使用这种模式，你可能需要延迟采用这个实验性功能或自己实现它。非常欢迎您的反馈。</li><li>如果在页面设置函数中执行数据获取操作，您可能需要重新考虑暂时不使用此功能。（按设计，视图过渡在进行时完全冻结DOM更新。）我们正在考虑将视图过渡限制在<code>&lt;Suspense&gt;</code>解析之前的最后时刻，但在此期间，如果您符合上述情况，您可能需要仔细考虑是否采用此功能。</li></ul><h2 id="数据获取" tabindex="-1"><a class="header-anchor" href="#数据获取" aria-hidden="true">#</a> 数据获取</h2><p>Nuxt提供了组合函数来处理应用程序中的数据获取。</p><p>Nuxt提供了两个组合函数和一个内置库，用于在浏览器或服务器环境中执行数据获取：<code>useFetch</code>、<code>useAsuncData</code>和<code>$fetch</code>。</p><p>简而言之：</p><ul><li><code>useFetch</code>是在组件设置函数中处理数据获取的最简单方法。</li><li><code>$fetch</code>可以根据用户交互进行网络请求。</li><li><code>useAsyncData</code>结合<code>$fetch</code>，提供了更精细的控制。</li></ul><p><code>useFetch</code>和<code>useAsyncData</code>共享一组常见的选项和模式，在后面的章节中我们将详细介绍。</p><p>在此之前，首先要知道为什么需要这些组合函数。</p><h3 id="为什么需要特定的组合函数" tabindex="-1"><a class="header-anchor" href="#为什么需要特定的组合函数" aria-hidden="true">#</a> 为什么需要特定的组合函数？</h3><p>使用像Nuxt这样的框架可以在客户端和服务器环境中执行调用调用和呈现页面时，必须解决一些问题。这就是为什么Nuxt提供了组合函数来封装查询，而不是让开发者仅依赖于<code>$fetch</code>调用。</p><h4 id="网络请求重复" tabindex="-1"><a class="header-anchor" href="#网络请求重复" aria-hidden="true">#</a> 网络请求重复</h4><p><code>useFetch</code>和<code>useAsyncData</code>组合函数确保一旦在服务器上进行了API调用，数据将以有效的方式在负载中传递到客户端。</p><p>负载时通过<code>useNuxtApp().payload</code>访问的JavaScript对象。它在客户端上用于避免在浏览器中执行代码时重新获取相同的数据。</p><h4 id="suspense" tabindex="-1"><a class="header-anchor" href="#suspense" aria-hidden="true">#</a> Suspense</h4><p>Nuxt在底层使用Vue的<code>&lt;Suspense&gt;</code>组件，以防止在视图中的每个异步数据可用之前导航。数据获取组合函数可以帮助您利用此功能，并根据每个调用的需求使用最适合的方法。</p><h3 id="usefetch" tabindex="-1"><a class="header-anchor" href="#usefetch" aria-hidden="true">#</a> UseFetch</h3><p><code>useFetch</code>组合函数是执行数据获取的最简单的方法。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token literal-property property">data</span><span class="token operator">:</span> count<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token string">&#39;/api/count&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  页面访问量：{{ count }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个组合函数是<code>useAsyncData</code>组合函数和<code>$fetch</code>工具的封装。</p><h3 id="fetch" tabindex="-1"><a class="header-anchor" href="#fetch" aria-hidden="true">#</a> $fetch</h3><p>Nuxt包括了<code>ofetch</code>库，并且作为全局别名<code>$fetch</code>自动导入到应用程序中。它是<code>useFetch</code>在幕后使用的工具。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">$fetch</span><span class="token punctuation">(</span><span class="token string">&#39;/api/users&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>e <span class="token operator">=&gt;</span> e<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">请注意，仅使用$fetch将不会提供网络请求重复和导航阻止。建议在提交数据到事件处理程序时使用 $fetch ,在客户端逻辑中使用，或与useAsyncData结合使用。</p></div><p><code>ofetch</code>库是基于Fetch API构建的，并为其添加了便利功能：</p><ul><li>在浏览器、Node或worker环境中的使用方式相同</li><li>自动解析响应</li><li>错误处理</li><li>自动重试</li><li>拦截器</li></ul><h3 id="useasyncdata" tabindex="-1"><a class="header-anchor" href="#useasyncdata" aria-hidden="true">#</a> <code>useAsyncData</code></h3><p><code>useAsyncData</code>组合函数负责封装异步逻辑并在解析完成后返回结果。</p><p>事实上，<code>useFetch(url)</code>几乎相当于<code>useAsyncData(url, () =&gt; $fetch(url))</code>，它是为最常见的用例提供的开发者体验糖。</p><p>在某些情况下，使用<code>useFetch</code>组合函数是不合适的，例如当CMS或第三方提供自己的查询层时。在这种情况下，您可以使用<code>useAsyncData</code>来封装您的调用，并仍然保持组合函数提供的好处。</p><p><code>useAsyncData</code>的第一个参数是用于缓存第二个参数（查询函数）的响应的唯一键。如果直接传递查询函数，则可以忽略该参数。在这种情况下，它将自动生成。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> error <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useAsyncData</span><span class="token punctuation">(</span><span class="token string">&#39;users&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">myGetFunction</span><span class="token punctuation">(</span><span class="token string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>由于自动生成的键仅考虑调用<code>useAsyncData</code>的文件和行，因此建议始终创建自己的键以避免不需要的行为，如果您正在创建自己的自定义组合函数并封装<code>useAsyncData</code>。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>data<span class="token punctuation">,</span> error<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useAsyncData</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">user: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">myGetFUnction</span><span class="token punctuation">(</span><span class="token string">&#39;users&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> id<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>useAsyncData</code>组合函数是包装和等待多个<code>useFetch</code>完成，并获取每个结果的绝佳方式。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> discounts<span class="token punctuation">,</span> pending <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useAsyncData</span><span class="token punctuation">(</span><span class="token string">&#39;cart-discount&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>coupons<span class="token punctuation">,</span> offers<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">$fetch</span><span class="token punctuation">(</span><span class="token string">&#39;/cart/coupons&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">$fetch</span><span class="token punctuation">(</span><span class="token string">&#39;/cart/offers&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    coupons<span class="token punctuation">,</span>
    offers
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="选项" tabindex="-1"><a class="header-anchor" href="#选项" aria-hidden="true">#</a> 选项</h3><p><code>useAsyncData</code>和<code>useFetch</code>返回相同的对象类型，并接受一组常见选项作为最后一个参数。它们可以帮助您控制组合函数的行为，例如导航阻止、缓存或执行。</p><h4 id="懒加载" tabindex="-1"><a class="header-anchor" href="#懒加载" aria-hidden="true">#</a> 懒加载</h4><p>默认情况下，数据获取的组合函数会在异步函数解析完成之前使用Vue的<code>Suspense</code>进行页面导航。通过使用<code>lazy</code>选项，可以忽略此功能在客户端导航时的使用。在这种情况下，你需要手动处理加载状态，使用<code>pending</code>值。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> <span class="token punctuation">{</span> pending<span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> posts <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token string">&#39;/api/posts&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">lazy</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 你需要处理加载状态 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pending<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    加载中...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post in posts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 做一些操作 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你还可以使用<code>useLazyFetch</code>和<code>useLazyAsyncData</code>作为方便的方法来执行相同的操作。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>pending<span class="token punctuation">,</span> data<span class="token operator">:</span> posts<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLazyFetch</span><span class="token punctuation">(</span><span class="token string">&#39;/api/posts&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="仅在客户端获取数据" tabindex="-1"><a class="header-anchor" href="#仅在客户端获取数据" aria-hidden="true">#</a> 仅在客户端获取数据</h4><p>默认情况下，数据获取的组合函数会在客户端和服务器环境中执行其异步函数。将<code>server</code>选项设置为<code>false</code>，只在客户端执行调用。在初始化加载时，在水合过程完成之前不会获取数据，因此你需要处理一个加载状态，但在随后的客户端导航中，数据将在加载页面之前等待获取。</p><p>与<code>lazy</code>选项结合使用，这对于首次渲染不需要的数据（例如，非SEO敏感数据）非常有用。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">/* 此调用在水合之前执行 */</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> article <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token string">&#39;api/article&#39;</span><span class="token punctuation">)</span>

<span class="token comment">/* 此调用仅在客户端执行 */</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> pending<span class="token punctuation">,</span> data<span class="token operator">:</span> posts <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token string">&#39;/api/comments&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  lazy<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  server<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>useFetch</code>组合函数用于在设置方法中调用，或在生命周期钩子函数的函数顶层直接调用，否则你应该使用<code>$fetch</code>方法。</p><h4 id="减小有效负载大小" tabindex="-1"><a class="header-anchor" href="#减小有效负载大小" aria-hidden="true">#</a> 减小有效负载大小</h4><p><code>pick</code>选项可帮助你通过仅选择你想要从组合函数返回的字段来减少存储在HTML文档中的有效负载大小。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">/* 仅选择模板中使用的字段 */</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> mountain <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token string">&#39;/api/mountains/everest&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">pick</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;description&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>{{ mountain.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ mountain.description }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果需要更多的控制或映射多个对象，可以使用<code>transform</code>函数来修改查询结果。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> mountains <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token string">&#39;/api/mountains&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> 
  <span class="token function-variable function">transform</span><span class="token operator">:</span> <span class="token punctuation">(</span>mountains<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> mountains<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>mountain <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token operator">:</span> mountain<span class="token punctuation">.</span>title<span class="token punctuation">,</span> description<span class="token operator">:</span> mountain<span class="token punctuation">.</span>description <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">pick和transform都不会阻止初始时获取不需要的数据，但它们将阻止不需要的数据被添加到到从服务器传输到客户端的有效负载中。</p></div><h4 id="缓存和重新获取数据" tabindex="-1"><a class="header-anchor" href="#缓存和重新获取数据" aria-hidden="true">#</a> 缓存和重新获取数据</h4><h5 id="键" tabindex="-1"><a class="header-anchor" href="#键" aria-hidden="true">#</a> 键</h5><p><code>useFetch</code>和<code>useAsyncData</code>使用键来防止重新获取想吐的数据。</p><ul><li><code>useFetch</code>使用提供的URL作为键。或者，可以在作为最后一个参数传递的<code>options</code>对象中提供<code>key</code>值。</li><li><code>useAsyncData</code>如果第一个参数是字符串，则将其用作键。如果第一个参数是执行查询的处理函数，则会为<code>useAsyncData</code>的实例生成一个基于文件名和行号的唯一键。</li></ul><div class="hint-container info"><p class="hint-container-title">要根据键获取缓存的数据，可以使用useNuxtData</p></div><h5 id="刷新和执行" tabindex="-1"><a class="header-anchor" href="#刷新和执行" aria-hidden="true">#</a> 刷新和执行</h5><p>如果要手动获取或刷新数据，请使用组合函数提供的<code>execute</code>或<code>refresh</code>函数。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> error<span class="token punctuation">,</span> execute<span class="token punctuation">,</span> refresh <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token string">&#39;/api/users&#39;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ data }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>refresh<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>刷新数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>execute</code>函数是<code>refresh</code>的别名，使用方式完全形同，但在非立即的情况下更语义化。</p><h5 id="监听" tabindex="-1"><a class="header-anchor" href="#监听" aria-hidden="true">#</a> 监听</h5><p>如果希望在应用程序中的其他响应式值更改时重新运行获取函数，请使用<code>watch</code>选项。可以将其用于一个或多个可监听的元素。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> error<span class="token punctuation">,</span> refresh <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token string">&#39;/api/users&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">/* 更改id将触发重新获取 */</span>
  watch<span class="token operator">:</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>请注意，监听响应式值不会更改获取的URL。例如，这将保持获取用户的相同初始ID，因为URL是在调用函数是构建的。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> error<span class="token punctuation">,</span> refresh <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/users/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  watch<span class="token operator">:</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果需要基于响应式值更改URL，可以使用计算URL。</p><h5 id="计算url" tabindex="-1"><a class="header-anchor" href="#计算url" aria-hidden="true">#</a> 计算URL</h5><p>有时，您可能需要从响应式值计算URL，并在每次更改时刷新数据，不需要费力的解决此问题，您可以将每个参数作为响应式值附加。Nuxt将自动使用响应式值并在每次更改时重新获取。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> pending <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLazyFetch</span><span class="token punctuation">(</span><span class="token string">&#39;/api/user&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  query<span class="token operator">:</span> <span class="token punctuation">{</span>
    user_id<span class="token operator">:</span> id
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在URL构建更复杂的情况下，可以使用回调函数作为计算getter，返回URL字符串。</p><p>每当依赖关系更改时，将使用新构建的URL获取数据。将其与非立即结合使用，可以在响应元素更改之前等待获取。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> pending<span class="token punctuation">,</span> status <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLazyFetch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/users/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 在获取期间禁用输入 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pending<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>status === &#39;idle&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      输入用户ID
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pending<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      加载中...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
      {{ data }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果需要在其他响应式值更改时强制刷新，还可以监听其他值。</p><h4 id="不立即执行" tabindex="-1"><a class="header-anchor" href="#不立即执行" aria-hidden="true">#</a> 不立即执行</h4><p><code>useFetch</code>组合函数在调用时会立即开始获取数据。你可以通过设置<code>immediate: fakse</code>来阻止立即执行，例如，等待用户交互。</p><p>为此，你需要使用<code>status</code>来处理获取生命周期，并使用<code>execute</code>来开始数据获取。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> error<span class="token punctuation">,</span> execute<span class="token punctuation">,</span> pending<span class="token punctuation">,</span> status <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useLazyFetch</span><span class="token punctuation">(</span><span class="token string">&#39;/api/comments&#39;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>status === &#39;idle&#39;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execute<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>获取数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pending<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    加载评论中...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
    {{ data }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为了更精细的控制，<code>status</code>变量可以有以下取值：</p><ul><li><code>idle</code>: 获取未开始</li><li><code>pending</code>: 获取已开始但尚未完成</li><li><code>error</code>: 获取失败</li><li><code>success</code>: 获取成功完成</li></ul><h3 id="传递请求头和cookie" tabindex="-1"><a class="header-anchor" href="#传递请求头和cookie" aria-hidden="true">#</a> 传递请求头和Cookie</h3><p>当我们在浏览器中调用<code>$fetch</code>时，用户的请求头（如<code>cookie</code>）会直接发送到API。但在服务器端渲染期间，由于<code>$fetch</code>请求在服务器内部进行，它不包含用户浏览器的Cookie，也不会传递来自获取响应的Cookie。</p><h4 id="将客户端请求头传递到api" tabindex="-1"><a class="header-anchor" href="#将客户端请求头传递到api" aria-hidden="true">#</a> 将客户端请求头传递到API</h4><p>我们可以使用<code>useRequestHeaders</code>来访问和代理服务器端的Cookie到API。</p><p>下面的示例将请求头添加到同构的<code>$fetch</code>调用中，以确保API端点能够访问用户最初发送的相同<code>cookie</code>请求头。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> headers <span class="token operator">=</span> <span class="token function">useRequestHeaders</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;cookie&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>data<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token string">&#39;/api/me&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>headers<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">在代理请求头到外部API之前，请谨慎选择需要包含的请求头。并非所有的请求头都可以安全地绕过，可能会引入不希望的行为。以下是一些不应该代理的常见请求头的列表：</p><ul><li>host、accept</li><li>content-length、content-md5、content-type</li><li>x-forwarded-host、x-forwarded-port、x-forwarded-proto</li><li>cf-connecting-ip、cf-ray</li></ul></div><h4 id="从服务器端api调用中传递cookie到ssr响应" tabindex="-1"><a class="header-anchor" href="#从服务器端api调用中传递cookie到ssr响应" aria-hidden="true">#</a> 从服务器端API调用中传递Cookie到SSR响应</h4><p>如果你想要将Cookie传递/代理到另一个方向，从内部请求返回到客户端，你需要自行处理。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> appendResponseHeader<span class="token punctuation">,</span> H3Event <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;h3&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">fetchWithCookie</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> H3Event<span class="token punctuation">,</span> url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/* 从服务器端点获取响应 */</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> $fetch<span class="token punctuation">.</span><span class="token function">raw</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
  <span class="token comment">/* 从响应中获取 Cookie */</span>
  <span class="token keyword">const</span> cookies <span class="token operator">=</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;set-cookie&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span>
  <span class="token comment">/* 将每个 Cookie 添加到我们的传入请求中 */</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> cookie <span class="token keyword">of</span> cookies<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">appendResponseHeader</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token string">&#39;set-cookie&#39;</span><span class="token punctuation">,</span> cookie<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/* 返回响应的数据 */</span>
  <span class="token keyword">return</span> res<span class="token punctuation">.</span>_data
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// 这个组合函数将自动将 Cookie 传递给客户端</span>
<span class="token keyword">const</span> event <span class="token operator">=</span> <span class="token function">useRequestEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchWithCookie</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token string">&#39;/api/with-cookie&#39;</span><span class="token punctuation">)</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>cookie<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="选项api支持" tabindex="-1"><a class="header-anchor" href="#选项api支持" aria-hidden="true">#</a> 选项API支持</h3><p>Nuxt3提供了一种在选项API中执行的<code>asyncData</code>获取数据的方式。你必须将组件定义包装在<code>defineNuxtComponent</code>中才能使用此功能。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">/* 使用 fetchKey 选项提供一个唯一的键 */</span>
  <span class="token literal-property property">fetchKey</span><span class="token operator">:</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">asyncData</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">hello</span><span class="token operator">:</span> <span class="token keyword">await</span> <span class="token function">$fetch</span><span class="token punctuation">(</span><span class="token string">&#39;/api/hello&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="序列化" tabindex="-1"><a class="header-anchor" href="#序列化" aria-hidden="true">#</a> 序列化</h3><p>当从<code>server</code>目录获取数据时，响应会使用<code>JSON.stringify</code>进行序列号。然而，由于序列化仅限于JavaScript原始类型，Nuxt会尽其所能将<code>$fetch</code>和<code>useFetch</code>的返回类型转换为匹配实际值的类型。</p><h4 id="示例-4" tabindex="-1"><a class="header-anchor" href="#示例-4" aria-hidden="true">#</a> 示例</h4><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 尽管我们返回了一个 Date 对象，但 `data` 的类型被推断为字符串</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token string">&#39;/api/foo&#39;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="自定义序列化函数" tabindex="-1"><a class="header-anchor" href="#自定义序列化函数" aria-hidden="true">#</a> 自定义序列化函数</h4><p>要自定义序列化行为，你可以在返回的对象上定义一个<code>toJSON</code>方法。如果定义了<code>toJSON</code>方法，Nuxt将尊重函数的返回类型，而不会尝试转换类型。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    createdAt<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        createdAt<span class="token operator">:</span> <span class="token punctuation">{</span>
          year<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>createdAt<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          month<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>createdAt<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          day<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>createdAt<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> data
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// `data` 的类型被推断为</span>
<span class="token comment">// {</span>
<span class="token comment">//   createdAt: {</span>
<span class="token comment">//     year: number</span>
<span class="token comment">//     month: number</span>
<span class="token comment">//     day: number</span>
<span class="token comment">//   }</span>
<span class="token comment">// }</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token string">&#39;/api/bar&#39;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="使用替换序列化器" tabindex="-1"><a class="header-anchor" href="#使用替换序列化器" aria-hidden="true">#</a> 使用替换序列化器</h4><p>Nuxt当前不支持将<code>JSON.stringify</code>替换为其他序列化器。但是，你可以将负载返回为普通字符串，并利用<code>toJSON</code>方法来保持类型安全。在下面的示例中，我们使用<code>superjson</code>作为序列化器。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> superjson <span class="token keyword">from</span> <span class="token string">&#39;superjson&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    createdAt<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token comment">// 绕过类型转换</span>
    <span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 使用 superjson 将输出序列化为字符串</span>
  <span class="token keyword">return</span> superjson<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">unknown</span> <span class="token keyword">as</span> <span class="token keyword">typeof</span> data
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> superjson <span class="token keyword">from</span> <span class="token string">&#39;superjson&#39;</span>

  <span class="token comment">// `date` 被推断为 { createdAt: Date }，你可以安全地使用 Date 对象的方法</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token string">&#39;/api/superjson&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">transform</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> superjson<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>value <span class="token keyword">as</span> unknown <span class="token keyword">as</span> string<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="状态管理" tabindex="-1"><a class="header-anchor" href="#状态管理" aria-hidden="true">#</a> 状态管理</h2><p>Nuxt提供了强大的状态管理库和useState组合函数，用于创建响应式且适用于SSR的共享状态。</p><p>Nuxt提供了<code>useState</code>组合函数，用于在组件之间创建响应式且适用于SSR的共享状态。</p><p><code>useState</code>是一个适用于SSR的<code>ref</code>替代品。它的值将在服务器端渲染后保留（在客户端渲染期间进行hydration`），并通过唯一的键在所有组件之间共享。</p><div class="hint-container info"><p class="hint-container-title">由于useState内部的数据将被序列化为JSON，因此重要的是它不包含无法序列化的内容，比如类、函数或符号。</p></div><h3 id="最佳实践" tabindex="-1"><a class="header-anchor" href="#最佳实践" aria-hidden="true">#</a> 最佳实践</h3><div class="hint-container warning"><p class="hint-container-title">注意</p><p>不要在<code>script setup&gt;</code>或<code>setup()</code>函数之外定义<code>const state = ref()</code>。 这样的状态将在所有访问你网站的用户之间共享，并可能导致内存泄漏！</p></div><h3 id="示例-5" tabindex="-1"><a class="header-anchor" href="#示例-5" aria-hidden="true">#</a> 示例</h3><h4 id="基本用法" tabindex="-1"><a class="header-anchor" href="#基本用法" aria-hidden="true">#</a> 基本用法</h4><p>在这个示例中，我们使用一个组件本地的计数器状态。任何使用<code>useState(&#39;counter&#39;)</code>的其他组件都共享同一个响应式状态。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;counter&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    计数器：{{ counter }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>counter++<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      +
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>counter--<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      -
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>要全局失效缓存的状态，请参考<code>clearNuxtState</code>工具。</p><h4 id="高级用法" tabindex="-1"><a class="header-anchor" href="#高级用法" aria-hidden="true">#</a> 高级用法</h4><p>在这个示例中，我们使用一个组合函数从HTTP请求头中检测用户的默认语言环境，并将其保存在一个<code>locale</code>状态中。</p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-1850-0" aria-selected="true">composables/locale.ts</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-1850-1" aria-selected="false">app.vue</button></div><!--[--><div class="vp-code-tab active" id="codetab-1850-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">composables/locale.ts</div><!--[--><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useLocale</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&#39;locale&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">useDefaultLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useDefaultLocale <span class="token operator">=</span> <span class="token punctuation">(</span>fallback <span class="token operator">=</span> <span class="token string">&#39;en-US&#39;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> locale <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span>fallback<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>server<span class="token punctuation">)</span> <span class="token punctuation">{</span>    
    <span class="token keyword">const</span> reqLocale <span class="token operator">=</span> <span class="token function">useRequestHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">&#39;accept-language&#39;</span><span class="token punctuation">]</span><span class="token operator">?.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>reqLocale<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      locale<span class="token punctuation">.</span>value <span class="token operator">=</span> reqLocale
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>client<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> navLang <span class="token operator">=</span> navigator<span class="token punctuation">.</span>language
    <span class="token keyword">if</span> <span class="token punctuation">(</span>navLang<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      locale<span class="token punctuation">.</span>value <span class="token operator">=</span> navLang
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> locale
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useLocales</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> locale <span class="token operator">=</span> <span class="token function">useLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> locales <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string">&#39;en-US&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;en-GB&#39;</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
    <span class="token string">&#39;ja-JP-u-ca-japanese&#39;</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>locales<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>locale<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    locales<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>locale<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> locales
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useLocaleDate</span> <span class="token operator">=</span> <span class="token punctuation">(</span>date<span class="token operator">:</span> Ref<span class="token operator">&lt;</span>Date<span class="token operator">&gt;</span> <span class="token operator">|</span> Date<span class="token punctuation">,</span> locale <span class="token operator">=</span> <span class="token function">useLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Intl</span><span class="token punctuation">.</span><span class="token function">DateTimeFormat</span><span class="token punctuation">(</span>locale<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token punctuation">{</span> dateStyle<span class="token operator">:</span> <span class="token string">&#39;full&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token function">unref</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-1850-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">app.vue</div><!--[--><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> locales <span class="token operator">=</span> <span class="token function">useLocales</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> locale <span class="token operator">=</span> <span class="token function">useLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token function">useLocaleDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">&#39;2016-10-26&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Nuxt生日<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ date }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>locale-chooser<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>预览不同的语言环境<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>locale-chooser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>locale<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>locale of locales<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>locale<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>locale<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{ locale }}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="共享状态" tabindex="-1"><a class="header-anchor" href="#共享状态" aria-hidden="true">#</a> 共享状态</h3><p>通过使用自动导入的组合函数，我们可以定义全局类型安全的状态并在整个应用程序中导入它们。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useCounter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&#39;counter&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useColor</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&#39;color&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;pink&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token function">useColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 与useState(&#39;color&#39;)相同</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>当前颜色：{{ color }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用第三方库" tabindex="-1"><a class="header-anchor" href="#使用第三方库" aria-hidden="true">#</a> 使用第三方库</h3><p>Nuxt曾经依赖于Vuex库来提供全局状态管理。如果你正在从Nuxt 2迁移，请参阅迁移指南。</p><p>Nuxt对状态管理不持有特定观点，所有请根据你的需求选择合适的解决方案。Nuxt与最流行的状态管理库有多种集成方式，包括：</p><ul><li>pinia - 官方推荐的Vue状态管理库</li><li>Harlem - 不可变的全局状态管理库</li><li>XState - 基于状态机的方法，具有可视化和测试状态逻辑的工具</li></ul><h2 id="错误处理" tabindex="-1"><a class="header-anchor" href="#错误处理" aria-hidden="true">#</a> 错误处理</h2><p>Nuxt3是一个全栈框架，这意味着在不同的上下文中可能会发生几种无法预防的用户运行时错误：</p><ul><li>Vue渲染声明周期中的错误（SSR和CSR）</li><li>Nitro服务器生命周期中的错误（<code>server/</code>目录）</li><li>服务器和客户端启动错误（SSR和CSR）</li><li>下载JS chunk时错误</li></ul><p><code>SSR代表 Server-Side Rendering，CSR代表 Client-Side Rendering</code></p><h3 id="vue渲染声明周期" tabindex="-1"><a class="header-anchor" href="#vue渲染声明周期" aria-hidden="true">#</a> Vue渲染声明周期</h3><ol><li>可以使用<code>onErrorCaptured</code>来捕获Vue错误。</li><li>Nuxt提供了<code>Vue:error</code>钩子，如果有任何错误传播到顶层，将会调用该钩子。</li><li>可以通过<code>vueApp.config.errorHandler</code>提供一个全局处理程序。它将接收所有的Vue错误，即使这些错误已经被处理。</li></ol><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtPlugin</span><span class="token punctuation">(</span><span class="token punctuation">(</span>nuxtApp<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  nuxtApp<span class="token punctuation">.</span>vueApp<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function-variable function">errorHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span>error<span class="token punctuation">,</span> instance<span class="token punctuation">,</span> info<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 处理错误，例如上报到一个服务</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 也可以这样</span>
  nuxtApp<span class="token punctuation">.</span><span class="token function">hook</span><span class="token punctuation">(</span><span class="token string">&#39;vue:error&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>error<span class="token punctuation">,</span> instance<span class="token punctuation">,</span> info<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 处理错误，例如上报到一个服务</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nitor服务器生命周期" tabindex="-1"><a class="header-anchor" href="#nitor服务器生命周期" aria-hidden="true">#</a> Nitor服务器生命周期</h3><p>目前无法为这些错误定义一个服务器端处理程序，但可以渲染一个错误页面</p><h3 id="启动错误" tabindex="-1"><a class="header-anchor" href="#启动错误" aria-hidden="true">#</a> 启动错误</h3><p>如果启动Nuxt应用时出现任何错误，Nuxt将会调用<code>app:error</code>钩子。</p><ul><li>运行Nuxt插件</li><li>处理<code>app.created</code>和<code>app:beforeMount</code>钩子</li><li>将你的Vue应用渲染为HTML(在SSR期间)</li><li>挂载应用程序（在客户端），不过应该使用<code>onErrorCaptured</code>或<code>vue:error</code>来处理这种情况</li><li>处理<code>app:mounted</code>钩子</li></ul><h3 id="js-chunk错误" tabindex="-1"><a class="header-anchor" href="#js-chunk错误" aria-hidden="true">#</a> JS chunk错误</h3><p>由于网络连接故障或新部署（使旧的散列JS chunk URL失效）,你可能会遇到块加载错误。Nuxt提供了内置支持来处理块加载错误，当在路由导航过程中某个块加载错误，它会执行硬刷新。</p><p>你可以通过将<code>experimental.emitRouteChunkError</code>设置为false(完全禁用对这些错误的处理)或<code>manual</code>(手动处理错误)来更改此行为。如果你想手动处理块加载错误，</p><p>原生实现可通过监听<code>router.error()</code>实现。</p><h3 id="错误页面" tabindex="-1"><a class="header-anchor" href="#错误页面" aria-hidden="true">#</a> 错误页面</h3><div class="hint-container warning"><p class="hint-container-title">注意</p><p>当Nuxt遇到致命错误（服务器上的任何未处理的错误，或客户端上使用<code>fatal: true</code>创建的错误），它将要么渲染一个JSON响应（如果使用<code>Accept: application/json</code>头部请求），要么触发一个全屏错误页面。</p></div><p>在以下情况下，可能会在服务器生命周期中发生错误：</p><ul><li>处理Nuxt插件</li><li>将你的Vue应用程序渲染为HTML</li><li>服务器API路由抛出错误</li></ul><p>它也可能在客户端上发生以下情况：</p><ul><li>处理Nuxt插件</li><li>在挂载应用程序之前（<code>app:beforeMount</code>钩子）</li><li>如果错误没有使用<code>onErrorCaptured</code>或<code>vue:error</code>钩子进行处理，则在挂载应用程序时</li><li>在浏览器中初始化和挂载Vue应用程序（<code>app:mounted</code>）</li></ul><p>通过在应用程序原目录中添加<code>~/error.vue</code>，可以自定义默认错误页面，与<code>app.vue</code>放在一起。</p><p>尽管它被称为“错误页面”，但它不是一个路由，不应该放在<code>~/pages</code>目录中。出于同样的原因，你不应该在此页面中使用<code>definePageMeta</code>。</p><p>错误页面有一个单一的prop-<code>error</code>，其中包含一个待处理的错误。</p><p>error对象提供以下字段：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token punctuation">{</span>
  url<span class="token operator">:</span> <span class="token builtin">string</span>
  statusCode<span class="token operator">:</span> <span class="token builtin">number</span>
  statusMessage<span class="token operator">:</span> <span class="token builtin">string</span>
  message<span class="token operator">:</span> <span class="token builtin">string</span>
  description<span class="token operator">:</span> <span class="token builtin">string</span>
  data<span class="token operator">:</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你有一个带有自定义字段的错误，它们将会丢失；你应该将它们分配给<code>data</code>：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">throw</span> <span class="token function">createError</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  status<span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">,</span>
  statusMessage<span class="token operator">:</span> <span class="token string">&#39;page Not Found&#39;</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    myCustomField<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对于自定义错误，我们强烈建议使用<code>onErrorCaptured</code>组合式，它可以在页面/组件设置函数中调用，或者使用<code>vue:error</code>运行时的Nuxt钩子，可以在Nuxt插件中进行设置。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtPlugin</span><span class="token punctuation">(</span>nuxtApp <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  nuxtApp<span class="token punctuation">.</span><span class="token function">hook</span><span class="token punctuation">(</span><span class="token string">&#39;vue:error&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当你准备移除错误页面时，你可以调用<code>clearError</code>辅助函数，它接受一个可选的路径进行重定向（例如，如果你想导航到一个“安全”的页面）。</p><h3 id="错误工具" tabindex="-1"><a class="header-anchor" href="#错误工具" aria-hidden="true">#</a> 错误工具</h3><h4 id="useerror" tabindex="-1"><a class="header-anchor" href="#useerror" aria-hidden="true">#</a> <code>useError</code></h4><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">useError</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Ref<span class="token operator">&lt;</span>Error <span class="token operator">|</span> <span class="token punctuation">(</span>url<span class="token punctuation">,</span> statusCode<span class="token punctuation">,</span> statusMessage<span class="token punctuation">,</span> message<span class="token punctuation">,</span> description<span class="token punctuation">,</span> data <span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>从函数将返回正在处理的全局Nuxt错误。</p><h4 id="createerror" tabindex="-1"><a class="header-anchor" href="#createerror" aria-hidden="true">#</a> <code>createError</code></h4><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">createError</span><span class="token punctuation">(</span>err<span class="token operator">:</span> <span class="token punctuation">{</span>cause<span class="token punctuation">,</span> data<span class="token punctuation">,</span> message<span class="token punctuation">,</span> name<span class="token punctuation">,</span> stack<span class="token punctuation">,</span> statusCode<span class="token punctuation">,</span> statusMessage<span class="token punctuation">,</span> fatal<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span> Error
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>使用附加元数据创建错误对象。它可以在你的应用程序中的vue和服务器部分中使用，并且意在被抛出。</p><p>如果你抛出使用<code>createError</code>创建的错误：</p><ul><li>在服务器端，它将触发一个全屏错误页面，你可以使用<code>clearError</code>清除该错误。</li><li>在客户端，它将抛出一个非致命错误供你处理。如果你需要触发一个全屏错误页面，你可以通过设置<code>fatal: true</code>来实现。</li></ul><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>data<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/movies/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>slug<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token function">createError</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">statusCode</span><span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">,</span>
      <span class="token literal-property property">statusMessage</span><span class="token operator">:</span> <span class="token string">&#39;page Not Found&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="showerror" tabindex="-1"><a class="header-anchor" href="#showerror" aria-hidden="true">#</a> <code>showError</code></h4><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">showError</span> <span class="token punctuation">(</span>err<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> Error <span class="token operator">|</span> <span class="token punctuation">{</span>statusCode<span class="token punctuation">,</span> statusMessage<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> Error
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>你可以在客户端的任何地方调用此函数，或者（在服务器端）直接在中间件、插件或<code>setup()</code>函数中使用。它将触发一个全屏错误页面，你可以使用<code>clearError</code>清除该错误。</p><p>建议使用<code>throw createError()</code>。</p><h4 id="clearerror" tabindex="-1"><a class="header-anchor" href="#clearerror" aria-hidden="true">#</a> <code>clearError</code></h4><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">clearError</span> <span class="token punctuation">(</span>options<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span>redirect<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>此函数将清除当前正在处理的Nuxt错误。它还接受一个可选的路径进行重定向（例如，如果你想导航到一个“安全”的页面）。</p><h3 id="在组件中渲染错误" tabindex="-1"><a class="header-anchor" href="#在组件中渲染错误" aria-hidden="true">#</a> 在组件中渲染错误</h3><p>Nuxt还提供了一个<code>&lt;NuxtErrorBoundary&gt;</code>组件，运行你在应用程序中处理客户端错误，而无需用错误页面替换整个站点。</p><p>该组件负责处理其默认插槽中发生的错误。在客户端上，它将阻止错误冒泡到顶层，并渲染<code>#error</code>插槽。</p><p><code>#error</code>插槽将接收<code>error</code>作为prop。（如果你设置<code>error=null</code>，它将触发重新渲染默认插槽；你需要确保错误已经完全解决，否则错误插槽将被再次渲染。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtErrorBoundary</span> <span class="token attr-name">@error</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>someErrorLogger<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#error</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{error, clearError}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      {{error}}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clearError<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        这将清除错误
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NuxtErrorBoundary</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="服务器" tabindex="-1"><a class="header-anchor" href="#服务器" aria-hidden="true">#</a> 服务器</h2><p>从单一代码库中构建全栈应用程序，从数据库获取数据，创建API，甚至生成静态的服务器端内容，如站点地图或RSS订阅源。</p><p>Nuxt的服务器框架允许你构建<strong>全栈应用程序</strong>。例如，你可以从数据库或其他服务器获取内容，创建API，甚至生成静态的服务器端内容，如站点地图或RSS订阅源 - 一切都可以从单一代码库中完成。</p><h3 id="有nitro驱动" tabindex="-1"><a class="header-anchor" href="#有nitro驱动" aria-hidden="true">#</a> 有Nitro驱动</h3><p>Nuxt的服务器使用的是<code>Nitro</code>。Nitro最初所为Nuxt创建的，但现在是UnJS的一部分，也被其他创建使用，甚至可以单独使用。</p><p>使用Nitro基于Nuxt超能力：</p><ul><li>对应用程序的服务器端部分拥有完全控制权</li><li>对任何提供者上进行通用部署（许多无需配置）</li><li>混合渲染</li></ul><h3 id="对应用程序的服务器端部分拥有完全控制权" tabindex="-1"><a class="header-anchor" href="#对应用程序的服务器端部分拥有完全控制权" aria-hidden="true">#</a> 对应用程序的服务器端部分拥有完全控制权</h3><p>使用Nitro,你可以轻松管理Nuxt应用程序的服务器部分，从API端点到中间件，</p><p>端点和中间件可以像这样定义：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineEventHandler</span><span class="token punctuation">(</span><span class="token keyword">async</span> event <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...在这里可以做任何你想做的事情</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你可以直接返回<code>text</code>、<code>json</code>、<code>html</code>甚至<code>stream</code>。</p><p>Nitro默认支持<strong>热模块替换</strong>和<strong>自动导入</strong>，就像Nuxt应用程序的其他部分一样。</p><h3 id="通用部署" tabindex="-1"><a class="header-anchor" href="#通用部署" aria-hidden="true">#</a> 通用部署</h3><p>Nitro提供了在任何地方部署Nuxt应用程序的能力，从裸机服务器到边缘网络，启动时间仅为几毫秒。</p><h3 id="混合渲染" tabindex="-1"><a class="header-anchor" href="#混合渲染" aria-hidden="true">#</a> 混合渲染</h3><p>你的Nuxt应用程序是否需要静态和动态页面？Nitro为你提供支持！</p><p>Nitro有一个强大的功能叫做<code>routeRules</code>，它允许你定义一组规则来自定义Nuxt应用程序的每个路由的渲染方式（以及更多）。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routeRules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 为了SEO目的，在构建时生成</span>
    <span class="token string-property property">&#39;/&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>prerender<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 缓存1小时</span>
    <span class="token string-property property">&#39;/api/*&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>cache<span class="token operator">:</span> <span class="token punctuation">{</span>maxAge<span class="token operator">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 重定向以避免404</span>
    <span class="token string-property property">&#39;/old-page&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      redirect<span class="token operator">:</span> <span class="token punctuation">{</span>to<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&#39;/new-page&#39;</span><span class="token punctuation">,</span> statusCOde<span class="token operator">:</span> <span class="token number">302</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此外，还有一些路由规则（例如ssr和experimentalNoScripts）不是Nuxt特定的，用于改变渲染页面为HTML时的行为。</p><p>一些路由规则（redirect和prerender）也会影响客户端行为。</p><p>Nitro用于构建具有服务器端渲染和预渲染功能的应用程序。</p><h2 id="图层" tabindex="-1"><a class="header-anchor" href="#图层" aria-hidden="true">#</a> 图层</h2><p>Nuxt提供了一个强大的系统，允许你扩展默认的文件、配置等。</p><p>Nuxt3的核心功能之一就是图层和扩展支持。你可以扩展默认的Nuxt应用程序，以便重组组件、工具和配置。图层结构几乎与标准的Nuxt应用程序相同，这使得它们易于编写和维护。</p><h3 id="使用场景" tabindex="-1"><a class="header-anchor" href="#使用场景" aria-hidden="true">#</a> 使用场景</h3><ul><li>使用<code>nuxt.config</code>和<code>app.config</code>在项目之间共享可重用的配置预设</li><li>使用<code>components/</code>目录创建组件库</li><li>使用<code>composables/</code>和<code>utils/</code>目录创建实用工具和可组合库</li><li>创建Nuxt模块预设</li><li>在项目之间共享标准设置</li><li>创建Nuxt主题</li></ul><h3 id="使用方法" tabindex="-1"><a class="header-anchor" href="#使用方法" aria-hidden="true">#</a> 使用方法</h3><p>你可以通过在<code>nuxt.config.ts</code>文件中添加<code>extends</code>属性来扩展一个图层。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 从本地图层扩展</span>
    <span class="token string">&#39;../base&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 从已安装的npm包扩展</span>
    <span class="token string">&#39;@my-themes/awesome&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 从git仓库扩展</span>
    <span class="token string">&#39;github:my-themes/awwsome#v1&#39;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="部署" tabindex="-1"><a class="header-anchor" href="#部署" aria-hidden="true">#</a> 部署</h2><p>Nuxt应用可以部署在Node.js服务器上，预渲染以进行静态托管，或部署到无服务器或边缘（CDN）环境中。</p><h3 id="node-js服务器" tabindex="-1"><a class="header-anchor" href="#node-js服务器" aria-hidden="true">#</a> Node.js服务器</h3><p>使用Nitro中的Node.js服务器预设可以在任何Node托管上部署。</p><ul><li><strong>默认输出格式</strong>，如果没有指定或自动检测</li><li>仅加载渲染请求所需的块，以获得最佳的冷启动时间</li><li>适用于将Nuxt应用部署到任何Node.js托管上</li></ul><h4 id="入口点" tabindex="-1"><a class="header-anchor" href="#入口点" aria-hidden="true">#</a> 入口点</h4><p>使用Node服务器预设运行<code>Nuxt build</code>后，将得到一个启动准备就绪的Node服务器的入口点。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">node</span> .output/server/index.mjs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这将启动你的生产Nuxt服务器，默认监听端口为3000。</p><p>它会遵循以下运行时环节变量：</p><ul><li><code>NITRO_PORT</code>或<code>PORT</code>（默认为<code>3000</code>）</li><li><code>NITRO_HOST</code>或<code>HOST</code>（默认为<code>0.0.0.0</code>）</li><li><code>NITRO_SSL_CERT</code>或<code>BITRO_SSL_KEY</code>-如果两者都存在，则会以HTTPS模式启动服务器。在绝大多数情况下，除了测试之外，不应该使用这个选项，Nitro服务器应该在像nginx或Cloudflare这样的反向代理后面运行，由它们终止SSL。</li></ul><h4 id="pm2" tabindex="-1"><a class="header-anchor" href="#pm2" aria-hidden="true">#</a> PM2</h4><p>要使用<code>pm2</code>，请使用<code>ecosystem.config.js</code>文件：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">apps</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;NuxtAppName&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">&#39;3000&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">exec_mode</span><span class="token operator">:</span> <span class="token string">&#39;cluster&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">instances</span><span class="token operator">:</span> <span class="token string">&#39;max&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token string">&#39;./.output/server/index.mjs&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="集群模式" tabindex="-1"><a class="header-anchor" href="#集群模式" aria-hidden="true">#</a> 集群模式</h4><p>你可以使用<code>NITRO_PRESET=node_cluster</code>来利用Node.js的cluster模块来提高多进程性能。</p><p>默认情况下，工作负载会使用轮询策略分发给工作进程。</p><h3 id="静态托管" tabindex="-1"><a class="header-anchor" href="#静态托管" aria-hidden="true">#</a> 静态托管</h3><p>有两种方式可以将Nuxt应用部署到任何静态托管服务上：</p><ul><li>使用<code>ssr:true</code>进行静态站点生成（SSG）,在构建时预渲染应用程序的路由（这是运行<code>nuxi generate</code>时的默认行为）。它还会生成<code>/200.html</code>和<code>/400.html</code>单页面应用回退页面，这些页面可以在客户端上渲染动态路由或404错误（尽管您可能需要在静态主机上进行配置）</li><li>或者，你可以使用<code>ssr:false</code>进行预渲染（静态单页面应用）。这将产生带有空的<code>&lt;div id=&quot;__nuxt&quot;&gt;&lt;/div&gt;</code>的HTML页面，通常用于渲染Vue应用的位置。你会失去许多预渲染站点的SEO优势，因此建议使用<code>&lt;ClientOnly&gt;</code>来包装无法在服务器端渲染的站点部分（如果有的话）。</li></ul><h4 id="基于爬虫的预渲染" tabindex="-1"><a class="header-anchor" href="#基于爬虫的预渲染" aria-hidden="true">#</a> 基于爬虫的预渲染</h4><p>使用<code>nuxi generate</code>命令使用Nitro爬虫构建和预渲染应用程序。这个命令类似于将<code>nuxt build</code>运行时的<code>nitro.static</code>选项设置为<code>true</code>，或者运行<code>nuxt build --prerender</code>。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>npx nuxi generate
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>现在可以将<code>.output/public</code>目录部署到任何静态托管服务上，或者使用<code>npx serve .output/public</code>在本地预览。</p><p>Nitro爬虫的工作原理：</p><ol><li>加载应用程序的根路由（<code>/</code>）的HTML、<code>~/pages</code>目录中的任何非动态页面以及<code>nitro.prerender.routes</code>数组中的其他路由。</li><li>将HTML和<code>payload.json</code>保存到<code>~/.output/public/</code>目录，以进行静态服务。</li><li>查找HTML中的所有锚点标签（<code>&lt;a href=&quot;&quot;</code>）以导航到其他路由。</li><li>对每个找到的锚点标签重复步骤1-3，直到没有更多的锚点标签可以爬取。</li></ol><p>这一点很重要，因为没有连接到可发现页面的页面无法自动预渲染。</p><h4 id="选择性预渲染" tabindex="-1"><a class="header-anchor" href="#选择性预渲染" aria-hidden="true">#</a> 选择性预渲染</h4><p>你可以手动指定Nitro将在构建期间获取和预渲染的路由，或者忽略不想预渲染的路由，比如在<code>nuxt.config</code>文件中的<code>/dynamic</code>路由：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  nitro<span class="token operator">:</span> <span class="token punctuation">{</span>
    prerender<span class="token operator">:</span> <span class="token punctuation">{</span>
      routes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;/user/1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;user/2&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      ignore<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;/dynamic&#39;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你可以将此与<code>crawLinks</code>选项结合使用，以预渲染一组爬虫无法发现的路由，比如你的<code>/sitemap.xml</code>或<code>/robots.txt</code>：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  nitro<span class="token operator">:</span> <span class="token punctuation">{</span>
    prerender<span class="token operator">:</span> <span class="token punctuation">{</span>
      crawlLinks<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      routes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;/sitemap.xml&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/robots.txt&#39;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>将<code>nitro.prerender</code>设置为true类似于将<code>nitro.prerender.crawlLinks</code>设置为true。</p><h4 id="仅客户端渲染" tabindex="-1"><a class="header-anchor" href="#仅客户端渲染" aria-hidden="true">#</a> 仅客户端渲染</h4><p>如果你不想预渲染你的路由，另一种使用静态托管的方式是在<code>nuxt.config</code>文件中将ssr属性设置为false。<code>nuxi generate</code>命令将输出一个<code>.output/public/index.html</code>入口点和类似经典客户端端Vue.js应用程序的JavaScript捆绑包。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  ssr<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="预设" tabindex="-1"><a class="header-anchor" href="#预设" aria-hidden="true">#</a> 预设</h3><p>除了Node.js服务器和静态托管服务之外，Nuxt3 项目还可以使用几个经过充分测试的预设进行部署，并进行最少的配置。</p><p>你可以在<code>nuxt.config</code>文件中明确设置所需的预设：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  nitro<span class="token operator">:</span> <span class="token punctuation">{</span>
    preset<span class="token operator">:</span> <span class="token string">&#39;node-server&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者在运行<code>nuxt build</code>时使用<code>NITRO_PRESET</code>环境变量：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">NITRO_PRESET</span><span class="token operator">=</span>node-server nuxt build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="cdn代理" tabindex="-1"><a class="header-anchor" href="#cdn代理" aria-hidden="true">#</a> CDN代理</h3><p>在大多数情况下，Nuxt可以与不由Nuxt自身生成或创建的第三方内容一起工作，但有时这样的内容可能会引起问题，尤其是Cloudflare 的“Minification and Security Options”。</p><p>因此，你应该确保在 Cloudflare 中取消选中 / 禁用以下选项。否则，不必要的重新渲染或水合错误可能会影响你的生产应用程序。</p><ol><li>速度 &gt; 优化 &gt; 自动缩小：取消选中 JavaScript、CSS 和 HTML</li><li>速度 &gt; 优化 &gt; 禁用 &quot;Rocket Loader™&quot;</li><li>速度 &gt; 优化 &gt; 禁用 &quot;Mirage&quot;</li><li>Scrape Shield &gt; 禁用 &quot;Email Address Obfuscation&quot;</li><li>Scrape Shield &gt; 禁用 &quot;Server-side Excludes&quot;</li></ol><p>通过这些设置，你可以确保 Cloudflare 不会向你的 Nuxt 应用程序注入可能引起不必要副作用的脚本。</p><h2 id="测试" tabindex="-1"><a class="header-anchor" href="#测试" aria-hidden="true">#</a> 测试</h2><p>在Nuxt3中，我们有一个重写版本的<code>@nuxt/test-utils</code>。我们支持Vitest和Jest作为测试运行器。</p><h3 id="安装-1" tabindex="-1"><a class="header-anchor" href="#安装-1" aria-hidden="true">#</a> 安装</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">--dev</span> @nuxt/test-utils vitest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="设置" tabindex="-1"><a class="header-anchor" href="#设置" aria-hidden="true">#</a> 设置</h3><p>在每个使用<code>@nuxt/test-utils</code>辅助方法的<code>describe</code>块中，你需要在开始之前设置测试上下文。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>describe<span class="token punctuation">,</span> test<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vitest&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>setup<span class="token punctuation">,</span> $fetch<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@nuxt/test-utils&#39;</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#39;我的测试&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 测试上下文选项</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;我的测试&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在幕后，<code>setup</code>在<code>beforeAll</code>、<code>beforeEach</code>、<code>afterEach</code>和<code>afterAll</code>中执行一系列任务，以正确设置Nuxt测试环境。</p><p>请参阅下面的选项以了解<code>setup</code>方法。</p><h4 id="nuxt配置-1" tabindex="-1"><a class="header-anchor" href="#nuxt配置-1" aria-hidden="true">#</a> Nuxt配置</h4><ul><li><code>rootDir</code>：Nuxt应用所在目录的路径。 <ul><li>类型：<code>string</code></li><li>默认值：<code>&#39;.&#39;</code></li></ul></li><li><code>configFile</code>：配置文件的名称 <ul><li>类型：<code>string</code></li><li>默认值：<code>&#39;nuxt.config&#39;</code></li></ul></li></ul><h4 id="时间设置" tabindex="-1"><a class="header-anchor" href="#时间设置" aria-hidden="true">#</a> 时间设置</h4><ul><li><code>setupTime</code>：允许<code>setupTest</code>完成其工作的时间（可能包括构建或生成Nuxt应用程序的文件，取决于传递的选项）。 <ul><li>类型：<code>number</code></li><li>默认值：<code>60000</code></li></ul></li></ul><h4 id="功能-1" tabindex="-1"><a class="header-anchor" href="#功能-1" aria-hidden="true">#</a> 功能</h4><ul><li><code>server</code>：是否启动一个服务器来响应测试套件中的请求。 <ul><li>类型：<code>boolean</code></li><li>默认值: <code>true</code></li></ul></li><li><code>port</code>：如果提供，将启动的测试服务器端口设置为该值。 <ul><li>类型：<code>number | undefined</code></li><li>默认值: <code>undefined</code></li></ul></li><li><code>build</code>：是否运行单独的构建步骤。 <ul><li>类型：<code>boolean</code></li><li>默认值: <code>true</code>(如果<code>browser</code>或<code>server</code>被禁用，则为false)</li></ul></li><li><code>browser</code>：在幕后，Nuxt测试工具使用<code>playwright</code>进行浏览器测试。如果设置了此选项，将会启动一个浏览器，并且可以在后续的测试套件中进行控制。 <ul><li>类型：<code>boolean</code></li><li>默认值: <code>false</code></li></ul></li><li><code>browserOptions</code>： <ul><li>类型：具有以下属性的<code>object</code><ul><li><code>type</code>：要启动的浏览器类型，可以是<code>chromium</code>、<code>firefox</code>或<code>webkit</code></li><li><code>launch</code>：在启动浏览器时将传递给<code>playwright</code>的选项对象。</li></ul></li></ul></li><li><code>runner</code>：指定测试套件的运行期。目前推荐使用Vitest。 <ul><li>类型：<code>&#39;vitest&#39; | &#39;jest&#39;</code></li><li>默认值: <code>vitest</code></li></ul></li></ul><h3 id="api" tabindex="-1"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h3><h4 id="fetch-url" tabindex="-1"><a class="header-anchor" href="#fetch-url" aria-hidden="true">#</a> <code>$fetch(url)</code></h4><p>获取服务器渲染页面的HTML。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>$fetch<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@nuxt/test-utils&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">$fetch</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="fetch-url-1" tabindex="-1"><a class="header-anchor" href="#fetch-url-1" aria-hidden="true">#</a> <code>fetch(url)</code></h4><p>获取服务器渲染页面的响应。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>fetch<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@nuxt/test-utils&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>body<span class="token punctuation">,</span> headers<span class="token punctuation">}</span> <span class="token operator">=</span> res<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="url-path" tabindex="-1"><a class="header-anchor" href="#url-path" aria-hidden="true">#</a> <code>url(path)</code></h4><p>获取给定页面的完整URL(包括测试服务器运行的端口)。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>url<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@nuxt/test-utils&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> pageUrl <span class="token operator">=</span> <span class="token function">url</span><span class="token punctuation">(</span><span class="token string">&#39;/page&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次编辑于: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 106981170+haozg-666@users.noreply.github.com">haozg</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 302839773@qq.com">haozg</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/blog/vue2/vue_09" class="" aria-label="【09】ssr-express"><!--[--><!--]--> 【09】ssr-express <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--[--><div id="comment" class="giscus-wrapper input-top" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><!--]--></main><!--]--></div><!----><!----><!--]--></div>
    <script type="module" src="/blog/assets/app-pp3-cujv.js" defer></script>
  </body>
</html>
