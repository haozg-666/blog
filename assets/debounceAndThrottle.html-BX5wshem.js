import{_ as s,o as a,c as t,e,b as n,d as p,f as o}from"./app-pp3-cujv.js";const c={},l=n("h2",{id:"前言",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#前言","aria-hidden":"true"},"#"),p(" 前言")],-1),i=n("p",null,"防抖11与节流指令防抖与节流指令防抖与节流指令防抖与节流指令 防抖11与节流指令防抖与节流指令防抖与节流指令防抖与节流指令 防抖11与节流指令防抖与节流指令防抖与节流指令防抖与节流指令 如图",-1),r=o(`<h3 id="_1-debounce-防抖-主要用于按钮的防抖" tabindex="-1"><a class="header-anchor" href="#_1-debounce-防抖-主要用于按钮的防抖" aria-hidden="true">#</a> 1. debounce 防抖 主要用于按钮的防抖</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 *<span class="token keyword">@file</span> debounce
 *<span class="token keyword">@version</span> 1.0.0
 *<span class="token keyword">@author</span> haozg
 *<span class="token keyword">@createTime</span> 2021/01/22
 *<span class="token keyword">@updateTime</span> 2021/01/22
 *<span class="token keyword">@see</span> [jsDoc中文文档]<span class="token punctuation">{</span><span class="token keyword">@link</span>  http://www.dba.cn/book/jsdoc/JSDOCKuaiBiaoQianBLOCKTAGS/CONSTRUCTS.html<span class="token punctuation">}</span>
 @description debounce 防抖 主要用于按钮的防抖
 */</span>

<span class="token keyword">const</span> defaultTime <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 防抖 单位时间只触发最后一次
 *  <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">?</span>Number<span class="token operator">|</span>defaultTime<span class="token punctuation">}</span></span> <span class="token parameter">time</span> - 间隔时间
 *  <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Function<span class="token punctuation">}</span></span> <span class="token parameter">fn</span> - 执行事件
 *  <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">?</span>String<span class="token operator">|</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">}</span></span> <span class="token parameter">event</span> - 事件类型 例：&#39;click&#39;
 *  <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Array<span class="token punctuation">}</span></span> <span class="token parameter">binding<span class="token punctuation">.</span>value</span> - [fn,event,time]
 *  <span class="token keyword">@example</span>
 <span class="token example">*  <span class="token code language-javascript">例：<span class="token operator">&lt;</span>button v<span class="token operator">-</span>debounce<span class="token operator">=</span><span class="token string">&quot;[reset,\`click\`,300]&quot;</span><span class="token operator">&gt;</span>刷新<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span>
 *  <span class="token code language-javascript">也可简写成：<span class="token operator">&lt;</span>button v<span class="token operator">-</span>debounce<span class="token operator">=</span><span class="token string">&quot;[reset]&quot;</span><span class="token operator">&gt;</span>刷新<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span>
 *  <span class="token code language-javascript">传递参数则：<span class="token operator">&lt;</span>button v<span class="token operator">-</span>debounce<span class="token operator">=</span><span class="token string">&quot;[()=&gt;reset(param),\`click\`,300]&quot;</span><span class="token operator">&gt;</span>刷新<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span></span>
 */</span>
<span class="token keyword">const</span> debounce <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">timer</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token literal-property property">fn</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token literal-property property">time</span><span class="token operator">:</span> defaultTime<span class="token punctuation">,</span>
    <span class="token function-variable function">debounceFun</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        debounce<span class="token punctuation">.</span>timer <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>debounce<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        debounce<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> debounce<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> debounce<span class="token punctuation">.</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">inserted</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>fn<span class="token punctuation">,</span> event <span class="token operator">=</span> <span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> time <span class="token operator">=</span> defaultTime<span class="token punctuation">]</span> <span class="token operator">=</span> binding<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        debounce<span class="token punctuation">.</span>fn <span class="token operator">=</span> fn<span class="token punctuation">;</span>
        debounce<span class="token punctuation">.</span>time <span class="token operator">=</span> time<span class="token punctuation">;</span>
        el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> debounce<span class="token punctuation">.</span>debounceFun<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">unbind</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>event <span class="token operator">=</span> <span class="token string">&#39;click&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> binding<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        el<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> debounce<span class="token punctuation">.</span>debounceFun<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> debounce<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-throttle-节流-主要用于按钮的节流" tabindex="-1"><a class="header-anchor" href="#_2-throttle-节流-主要用于按钮的节流" aria-hidden="true">#</a> 2. throttle 节流 主要用于按钮的节流</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 *<span class="token keyword">@file</span> throttle
 *<span class="token keyword">@version</span> 1.0.0
 *<span class="token keyword">@author</span> haozg
 *<span class="token keyword">@createTime</span> 2021/01/22
 *<span class="token keyword">@updateTime</span> 2021/01/22
 *<span class="token keyword">@see</span> [jsDoc中文文档]<span class="token punctuation">{</span><span class="token keyword">@link</span>  http://www.dba.cn/book/jsdoc/JSDOCKuaiBiaoQianBLOCKTAGS/CONSTRUCTS.html<span class="token punctuation">}</span>
 @description throttle 节流 主要用于按钮的节流
 */</span>

<span class="token keyword">const</span> defaultTime <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 *  节流 每单位时间可触发一次
 *  第一次瞬间触发，最后一次不管是否达到间隔时间依然触发
 * 【考虑到input的change事件】
 *  <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">?</span>Number<span class="token operator">|</span>defaultTime<span class="token punctuation">}</span></span> <span class="token parameter">time</span> - 间隔时间
 *  <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Function<span class="token punctuation">}</span></span> <span class="token parameter">fn</span> - 执行事件
 *  <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">?</span>String<span class="token operator">|</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">}</span></span> <span class="token parameter">event</span> - 事件类型 例：&#39;click&#39;
 *  <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>Array<span class="token punctuation">}</span></span> <span class="token parameter">binding<span class="token punctuation">.</span>value</span> - [fn,event,time]
 *  <span class="token keyword">@example</span>
 <span class="token example">*  <span class="token code language-javascript">例：<span class="token operator">&lt;</span>button v<span class="token operator">-</span>throttle<span class="token operator">=</span><span class="token string">&quot;[reset,\`click\`,300]&quot;</span><span class="token operator">&gt;</span>刷新<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span>
 *  <span class="token code language-javascript">也可简写成：<span class="token operator">&lt;</span>button v<span class="token operator">-</span>throttle<span class="token operator">=</span><span class="token string">&quot;[reset]&quot;</span><span class="token operator">&gt;</span>刷新<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span>
 *  <span class="token code language-javascript">传递参数则：<span class="token operator">&lt;</span>button v<span class="token operator">-</span>throttle<span class="token operator">=</span><span class="token string">&quot;[()=&gt;reset(param),\`click\`,300]&quot;</span><span class="token operator">&gt;</span>刷新<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span></span>
 */</span>
<span class="token keyword">const</span> throttle <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">timer</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token literal-property property">fn</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token literal-property property">time</span><span class="token operator">:</span> defaultTime<span class="token punctuation">,</span>
    <span class="token literal-property property">timer_end</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token function-variable function">throttleFun</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>throttle<span class="token punctuation">.</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>throttle<span class="token punctuation">.</span>timer_end<span class="token punctuation">)</span><span class="token punctuation">;</span>
            throttle<span class="token punctuation">.</span>timer_end <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> throttle<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> throttle<span class="token punctuation">.</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        throttle<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// eslint-disable-next-line</span>
        throttle<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> throttle<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> throttle<span class="token punctuation">.</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">inserted</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>fn<span class="token punctuation">,</span> event <span class="token operator">=</span> <span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> time <span class="token operator">=</span> defaultTime<span class="token punctuation">]</span> <span class="token operator">=</span> binding<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        throttle<span class="token punctuation">.</span>fn <span class="token operator">=</span> fn<span class="token punctuation">;</span>
        throttle<span class="token punctuation">.</span>time <span class="token operator">=</span> time<span class="token punctuation">;</span>
        el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> throttle<span class="token punctuation">.</span>throttleFun<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">unbind</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>event <span class="token operator">=</span> <span class="token string">&#39;click&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> binding<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        el<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> throttle<span class="token punctuation">.</span>throttleFun<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> throttle<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="啊1throttle-节流-主要用于按钮的节流dd" tabindex="-1"><a class="header-anchor" href="#啊1throttle-节流-主要用于按钮的节流dd" aria-hidden="true">#</a> 啊1throttle 节流 主要用于按钮的节流DD</h3><h3 id="啊2throttle-节流-主要用于按钮的节流dd" tabindex="-1"><a class="header-anchor" href="#啊2throttle-节流-主要用于按钮的节流dd" aria-hidden="true">#</a> 啊2throttle 节流 主要用于按钮的节流DD</h3><h3 id="啊3throttle-节流-主要用于按钮的节流dd" tabindex="-1"><a class="header-anchor" href="#啊3throttle-节流-主要用于按钮的节流dd" aria-hidden="true">#</a> 啊3throttle 节流 主要用于按钮的节流DD</h3><h4 id="啊4throttle-节流-主要用于按钮的节流dd" tabindex="-1"><a class="header-anchor" href="#啊4throttle-节流-主要用于按钮的节流dd" aria-hidden="true">#</a> 啊4throttle 节流 主要用于按钮的节流DD</h4><h4 id="啊5throttle-节流-主要用于按钮的节流dd" tabindex="-1"><a class="header-anchor" href="#啊5throttle-节流-主要用于按钮的节流dd" aria-hidden="true">#</a> 啊5throttle 节流 主要用于按钮的节流DD</h4><h4 id="啊6throttle-节流-主要用于按钮的节流dd" tabindex="-1"><a class="header-anchor" href="#啊6throttle-节流-主要用于按钮的节流dd" aria-hidden="true">#</a> 啊6throttle 节流 主要用于按钮的节流DD</h4><h5 id="啊7throttle-节流-主要用于按钮的节流dd" tabindex="-1"><a class="header-anchor" href="#啊7throttle-节流-主要用于按钮的节流dd" aria-hidden="true">#</a> 啊7throttle 节流 主要用于按钮的节流DD</h5><h5 id="啊8throttle-节流-主要用于按钮的节流dd" tabindex="-1"><a class="header-anchor" href="#啊8throttle-节流-主要用于按钮的节流dd" aria-hidden="true">#</a> 啊8throttle 节流 主要用于按钮的节流DD</h5><h6 id="啊9throttle-节流-主要用于按钮的节流dd" tabindex="-1"><a class="header-anchor" href="#啊9throttle-节流-主要用于按钮的节流dd" aria-hidden="true">#</a> 啊9throttle 节流 主要用于按钮的节流DD</h6>`,13);function u(k,d){return a(),t("div",null,[l,i,e(" more"),r])}const m=s(c,[["render",u],["__file","debounceAndThrottle.html.vue"]]);export{m as default};
